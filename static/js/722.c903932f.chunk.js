"use strict";(self.webpackChunkoatsfx_btd6_tool=self.webpackChunkoatsfx_btd6_tool||[]).push([[722],{9358:(e,s,t)=>{t.d(s,{A:()=>x});var l=t(1104);const a=t.p+"static/media/selling_disabled.b93aa85cb5afbb0dff98.webp",i=t.p+"static/media/monkey_knowledge_disabled.b3f9bea9fde617f36ea8.webp";var o=t(1421),n=t(642),c=t(579);const r=e=>{var s;let{tileCode:t,tile:r}=e;return(0,c.jsxs)("div",{className:"indicator w-full flex flex-col outline outline-1 outline-white/50 rounded-xl items-center my-8 py-4 pb-6 bg-no-repeat bg-top bg-cover bg-clip-border "+l.Di[r.GameData.selectedMap],children:[(0,c.jsxs)("div",{className:"indicator-item indicator-top indicator-center badge badge-ghost font-semibold gap-1 px-5 py-3 outline outline-1 outline-white/25",children:[(0,c.jsx)("img",{src:l.pi[r.GameData.subGameType],className:"w-[16px]"}),(0,n.iS)((0,n.YY)(r.GameData.subGameType))]}),(0,c.jsx)("p",{className:"font-bold text-2xl text-center",children:t}),(0,c.jsxs)("p",{className:"font-medium text-md text-center",children:[(0,n.iS)(r.GameData.selectedMap)," //"," ",(0,n.iS)(r.GameData.selectedDifficulty)]}),(0,c.jsxs)("p",{className:"text-md text-center",children:["$".concat(null===(s=r.GameData.dcModel.startRules.cash)||void 0===s?void 0:s.toLocaleString()," // ")," ","Round ".concat(r.GameData.dcModel.startRules.round,"-").concat(r.GameData.dcModel.startRules.endRound)]}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 justify-center items-center",children:[r.GameData.dcModel.disableSelling?(0,c.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":"Selling Disabled",children:(0,c.jsx)("img",{src:a,className:"w-[34px]"})}):(0,c.jsx)(c.Fragment,{}),r.GameData.dcModel.disableMK?(0,c.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":"Monkey Knowledge Disabled",children:(0,c.jsx)("img",{src:i,className:"w-[34px]"})}):(0,c.jsx)(c.Fragment,{}),"Relic"===r.TileType?(0,c.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":(0,n.iS)(r.RelicType),children:(0,c.jsx)("img",{src:l.Gh[r.RelicType],className:"w-[34px]"})}):(0,c.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":(0,n.iS)(r.TileType),children:(0,c.jsx)("img",{src:l.fO[r.TileType],className:"w-[34px]"})})]}),r.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"divider px-4",children:r.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length>r.GameData.dcModel.towers._items.filter((e=>e.isHero)).length/2?"Heroes Excluded":"Heroes"}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2 gap-y-3 justify-center",children:r.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length>r.GameData.dcModel.towers._items.filter((e=>e.isHero)).length/2?r.GameData.dcModel.towers._items.filter((e=>e.isHero&&0===e.max&&"ChosenPrimaryHero"!==e.tower)).map((e=>(0,c.jsx)(o.w,{name:e.tower,image:l.yc[e.tower]},e.tower))):r.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).map((e=>(0,c.jsx)(o.w,{name:e.tower,image:l.yc[e.tower]},e.tower)))})]}):null,(0,c.jsx)("div",{className:"divider px-4",children:"Towers"}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2 gap-y-3 justify-center",children:r.GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)).map((e=>(0,c.jsx)(o.w,{name:e.tower,image:l.yc[e.tower],indicator:e.max>0?e.max:"\u221e"},e.tower)))})]})};var d=t(5043),m=t(5393),h=t(7294),u=t(2905);const x=e=>{let{data:s,loading:t,selectedTile:a,gameType:i,changeTile:o}=e;const[x,p]=(0,d.useState)("All"),[f,g]=(0,d.useState)({}),w=e=>{p(e.target.value)};return(0,d.useEffect)((()=>{const e=Object.keys(s).sort().reduce(((e,t)=>(s[t].GameData.subGameType!==n.Zm[i]||"All"!==x&&s[t].TileType!==x||(e[t]=s[t]),e)),{});Object.keys(e).includes(a)||""===a||o(Object.keys(e).at(0)),g(e)}),[x,s]),(0,c.jsx)("div",{className:"w-full",children:(0,c.jsxs)("div",{className:"w-full justify-center",children:[(0,c.jsx)("p",{className:"text-lg font-medium text-center",children:"Select a Tile"}),t?(0,c.jsxs)("div",{className:"flex flex-col gap-2 w-full py-2 items-center",children:[(0,c.jsx)("div",{className:"skeleton h-12 w-full"}),(0,c.jsx)("div",{className:"skeleton h-3 w-full"}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,c.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,c.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,c.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,c.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,c.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex gap-4 py-1 justify-center",children:[(0,c.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:"radio-1",value:"Banner",className:"radio",checked:"Banner"===x,onChange:w}),(0,c.jsx)("img",{className:"w-[28px] py-2",src:m})]}),(0,c.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:"radio-1",value:"Relic",className:"radio",checked:"Relic"===x,onChange:w}),(0,c.jsx)("img",{className:"w-[28px] py-2",src:h})]}),(0,c.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:"radio-1",value:"Regular",className:"radio",checked:"Regular"===x||"TeamFirstCapture"===x,onChange:w}),(0,c.jsx)("img",{className:"w-[28px] py-2",src:u})]}),(0,c.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:"radio-1",value:"All",className:"radio",checked:"All"===x,onChange:w}),(0,c.jsx)("p",{className:"text-sm py-3",children:"All"})]})]}),(0,c.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,c.jsxs)("select",{id:"tile-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{const s=e.target.value;o(s)},defaultValue:"Select a tile",children:[(0,c.jsx)("option",{disabled:!0,children:"Select a tile"}),Object.entries(f).map((e=>(0,c.jsx)("option",{id:e[0],children:e[0]},e[0])))]}),(0,c.jsxs)("details",{className:"dropdown dropdown-right dropdown-center",children:[(0,c.jsx)("summary",{className:"btn w-24",children:"Quick Relic"}),(0,c.jsx)("ul",{className:"p-2 shadow-xl menu dropdown-content z-[1] bg-base-100 rounded-box w-52 outline outline-white/25 outline-1",children:Object.entries(s).map((e=>"Relic"===e[1].TileType&&e[1].GameData.subGameType===n.Zm[i]?(0,c.jsx)("li",{children:(0,c.jsxs)("a",{id:e[0],onClick:s=>{((e,s)=>{p("Relic"),o(s),document.getElementById("tile-select").value=e.target.id})(s,e[0])},children:[(0,c.jsx)("img",{className:"w-[20px]",src:l.Gh[e[1].RelicType]}),(0,n.iS)(e[1].RelicType)]})},e[1].RelicType):null))})]})]}),a?(0,c.jsx)(r,{tileCode:a,tile:s[a]}):(0,c.jsx)("p",{className:"text-center",children:"No tile selected."})]})]})})}},1421:(e,s,t)=>{t.d(s,{w:()=>o});var l=t(642),a=t(8817),i=t(579);const o=e=>{let{name:s,image:t,indicator:o,boxOfMonkey:n}=e;return(0,i.jsxs)("div",{className:"tooltip before:z-50 before:content-[attr(data-tip)] ","data-tip":(0,l.iS)(s),children:[o?(0,i.jsx)("span",{className:"indicator-item indicator-bottom indicator-center badge px-2 outline outline-white/25 outline-1 rounded-[4px] font-medium shadow-lg",children:o}):(0,i.jsx)(i.Fragment,{}),n?(0,i.jsx)("span",{className:"indicator-item indicator-top font-medium shadow-lg",children:(0,i.jsx)("img",{src:a,className:"w-[24px]"})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("div",{className:"avatar",children:(0,i.jsx)("div",{className:"w-8 rounded-full shadow outline outline-1 outline-white/25",children:(0,i.jsx)("img",{src:t})})})]})}},4699:(e,s,t)=>{t.d(s,{f:()=>a});var l=t(5043);const a=e=>{const s="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/tiles.json",[t,a]=(0,l.useState)({}),[i,o]=(0,l.useState)(!0);return(0,l.useMemo)((()=>{(async()=>{try{const e=await fetch(s);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();a(t),console.log(t)}catch(e){console.log(e)}finally{o(!1)}})()}),[e]),{data:t,loading:i}}},7080:(e,s,t)=>{t.d(s,{j:()=>a});var l=t(5043);const a=e=>{const s="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/event_relics.json",[t,a]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0);return(0,l.useMemo)((()=>{(async()=>{try{const e=await fetch(s);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();a(t),console.log(t)}catch(e){console.log(e)}finally{o(!1)}})()}),[e]),{data:t,loading:i}}},8424:(e,s,t)=>{t.d(s,{g:()=>a});var l=t(5043);const a=()=>{const[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(!0);return(0,l.useMemo)((()=>{(async()=>{try{const e=await fetch("https://storage.googleapis.com/btd6-ct-map/event-seeds.json");if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json(),l=t.flatMap(((e,s)=>e?[{id:e,number:s}]:[]));l.reverse(),s(l),console.log(t)}catch(e){console.log(e)}finally{a(!1)}})()}),[]),{data:e,loading:t}}},3494:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(9967);const a=[{name:"Air and Sea",id:"AirAndSea",image:t(202),description:"Ace, Heli, Buccaneer and Sub have their placement and upgrade costs reduced by 5%, and their reload improved by 5% "},{name:"Box of Monkey",id:"BoxOfMonkey",image:t(8817),description:"Start each game with one free Monkey costing $400 or less for unmodified initial placement."},{name:"Magic Monkeys",id:"MagicMonkeys",image:t(8678),description:"Reduces cost of all Magic Monkeys by 8%."},{name:"Marching Boots",id:"MarchingBoots",image:t(4811),description:"In restricted count games, give players +1 max count of each tower in their loadout or +4 total max count per game."},{name:"Military Monkeys",id:"MilitaryMonkeys",image:t(550),description:"Reduces cost of all Military Monkeys by 8%."},{name:"Monkey Tycoon",id:"MonkeyTycoon",image:t(7178),description:"Get +1 of all Monkey Towers in your loadout and their base price is reduced by 4%."},{name:"Primary Primates",id:"PrimaryPrimates",image:t(8638),description:"Reduces cost of all Primary Monkeys by 8%."},{name:"Support Simians",id:"SupportSimians",image:t(5686),description:"Reduces cost of all Support Monkeys by 8%."},{name:"Starting Stash",id:"StartingStash",image:t(4618),description:"Start each game with an extra 250 cash (stacks with More Cash on Regular Tiles)."}];var i=t(5043),o=t(579);const n=e=>{let{data:s,eventRelics:t,loading:l,relics:n,handleRelicFilterClick:c}=e;const[r,d]=(0,i.useState)([]),m=e=>{c(e.target.id)};return(0,i.useEffect)((()=>{let e=[];Object.entries(s).map((s=>{s[1].RelicType&&e.push(s[1].RelicType)})),d(e.concat(t))}),[s,t]),(0,o.jsxs)("div",{className:"w-2/3",children:[(0,o.jsx)("p",{className:"text-lg font-medium text-center",children:"Select some Relics"}),(0,o.jsx)("div",{className:"w-full",children:l?(0,o.jsxs)("div",{className:"flex flex-col gap-2 w-full py-2 items-center",children:[(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"}),(0,o.jsx)("div",{className:"skeleton h-6 w-full"})]}):a.map((e=>(0,o.jsx)("div",{className:"tooltip flex","data-tip":r.includes(e.id)?e.description:"Not available this event.",children:(0,o.jsxs)("label",{className:"label w-full"+(r.includes(e.id)?" cursor-pointer":" cursor-not-allowed opacity-40"),children:[(0,o.jsx)("img",{src:e.image,className:"w-[28px]"}),(0,o.jsx)("span",{className:"label-text",children:e.name}),(0,o.jsx)("input",{type:"checkbox",checked:n.includes(e.id),className:"checkbox checkbox-sm",id:e.id,disabled:!r.includes(e.id),onChange:m})]})},e.id)))})]})};var c=t(9358),r=t(4699);const d={Easy:.85,Medium:1,Hard:1.08};var m=t(1104),h=t(642),u=t(1421);const x=e=>{let{solution:s}=e;return(0,o.jsx)("div",{className:"indicator gap-3 items-center px-12 justify-center border-b border-white/25 py-4",children:s.sort(((e,s)=>s.cost-e.cost)).map(((e,s)=>(0,o.jsx)(u.w,{name:"".concat(e.name,": $").concat(e.cost.toLocaleString()).concat(e.boxOfMonkey?"*":""),image:m.yc[e.name],indicator:e.path,boxOfMonkey:e.boxOfMonkey},s)))})},p=e=>{let{solutions:s,solutionTile:t,solutionNum:l,disableClear:a,clearSolutions:i}=e;return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsxs)("p",{className:"text-lg font-bold text-center",children:["Possible Solutions",t?" for ".concat(t," in CT").concat(l):""]}),s.length>0?(0,o.jsxs)("div",{className:"overflow-y-scroll max-h-96 h-96 my-4 py-4 px-12 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,o.jsx)("p",{className:"font-semibold",children:"Solutions"}),(0,o.jsx)("div",{className:"flex flex-wrap w-full gap-x-2 px-2 items-center justify-center",children:s.map(((e,s)=>(0,o.jsx)(x,{solution:e},s)))})]}):(0,o.jsx)("p",{className:"text-center",children:"Solutions will appear here."}),(0,o.jsxs)("p",{className:"text-center italic",children:["Showing ",s.length," total solution",1===s.length?"":"s","."]}),(0,o.jsx)("div",{className:"flex gap-4 items-center justify-center py-2",children:(0,o.jsx)("button",{className:"btn min-w-24 outline outline-1 outline-error text-error",disabled:a,onClick:i,children:"Clear"})})]})};var f=t(7080);var g=t(6229),w=t(8424);const j=()=>{const{data:e,loading:s}=(0,w.g)(),[t,a]=(0,i.useState)(e.length-1),{data:x,loading:j}=(0,r.f)(t),{data:y,loading:b}=(0,f.j)(t),{data:N,loading:v}=(()=>{const e="https://raw.githubusercontent.com/hemisemidemipresent/cyberquincy/master/jsons/costs.json",[s,t]=(0,i.useState)({}),[l,a]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{(async()=>{try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const l=await s.json();Object.entries(l).forEach((e=>{l[e[0].replace("druid_monkey","Druid").replace("engineer","EngineerMonkey").replace(/(_\w)/g,(e=>e[1].toUpperCase())).replace(/^./,(e=>e.toUpperCase()))]=l[e[0]],delete l[e[0]]})),t(l)}catch(s){console.log(s)}finally{a(!1)}})()}),[e]),{data:s,loading:l}})(),{data:k,loading:M}=(()=>{const e="https://raw.githubusercontent.com/hemisemidemipresent/cyberquincy/master/jsons/heroes.json",[s,t]=(0,i.useState)({}),[l,a]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{(async()=>{try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const l=await s.json();Object.entries(l).forEach((e=>{l[e[0].replace("brickell","AdmiralBrickell").replace("churchill","CaptainChurchill").replace("gwen","Gwendolin").replace("jones","StrikerJones").replace("obyn","ObynGreenfoot").replace("pat","PatFusty").replace(/(_\w)/g,(e=>e[1].toUpperCase())).replace(/^./,(e=>e.toUpperCase()))]=l[e[0]],delete l[e[0]]})),t(l)}catch(s){console.log(s)}finally{a(!1)}})()}),[e]),{data:s,loading:l}})(),[S,T]=(0,i.useState)(""),[C,D]=(0,i.useState)([]),[G,R]=(0,i.useState)(0),[H,_]=(0,i.useState)(2),[O,A]=(0,i.useState)(!1),[E,L]=(0,i.useState)(!0),[F,B]=(0,i.useState)(!1),[P,I]=(0,i.useState)([]),[z,q]=(0,i.useState)(""),[Q,U]=(0,i.useState)(0),[V,Y]=(0,i.useState)(!1),[$,K]=(0,i.useState)([]),[W,J]=(0,i.useState)([]),[Z,X]=(0,i.useState)([]),[ee,se]=(0,i.useState)([]),[te,le]=(0,i.useState)([]),ae=j||v||M||b;(0,i.useEffect)((()=>{V&&setTimeout((()=>{ie()}),1)}),[V]);const ie=()=>{const e=[],s=x[S].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)),l=x[S].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max));console.log(s);const a=C.includes("MonkeyTycoon")?1:0,i=C.includes("MarchingBoots")?1:0,o=C.includes("StartingStash")?250:0,n=a+i,c=[{towerType:"all",costMultipiler:d[x[S].GameData.selectedDifficulty]}];C.includes("AirAndSea")&&c.push({towerType:"military",costMultipiler:.95}),C.includes("MilitaryMonkeys")&&c.push({towerType:"military",costMultipiler:.92}),C.includes("MagicMonkeys")&&c.push({towerType:"magic",costMultipiler:.92}),C.includes("MonkeyTycoon")&&c.push({towerType:"all",costMultipiler:.96}),C.includes("PrimaryPrimates")&&c.push({towerType:"primary",costMultipiler:.92}),C.includes("SupportSimians")&&c.push({towerType:"support",costMultipiler:.92}),console.log(c),console.log(k);for(let t=0;t<6;t++)for(let s=0;s<6;s++)for(let l=0;l<6;l++)e.push([t,s,l]);const r=e.filter(((e,s,t)=>t.indexOf(e)===s)).filter((e=>e.filter((e=>e>2)).length<=1)).filter((e=>e.filter((e=>0===e)).length>0)).sort();if(""!==S){q(S),U(t);const e=r.flatMap((e=>Object.entries(N).flatMap((t=>{let[l,a]=t;if(!s.find((e=>l.includes(e.tower))))return{name:l,path:"",cost:-1};const i=h.HK[l],[o,n,r]=e,d=(0,h.QC)(a.cost*c[0].costMultipiler);let m=d+Array.from({length:o+1},((e,s)=>{let t=0;for(let l=0;l<c.length;l++)"all"!==c[l].towerType&&i!==c[l].towerType||(t+=(0,h.QC)(a.upgrades.top_path[s]*c[l].costMultipiler)||0);return t})).reduce(((e,s)=>e+s),0);return m+=Array.from({length:n+1},((e,s)=>{let t=0;for(let l=0;l<c.length;l++)"all"!==c[l].towerType&&i!==c[l].towerType||(t+=(0,h.QC)(a.upgrades.middle_path[s]*c[l].costMultipiler)||0);return t})).reduce(((e,s)=>e+s),0),m+=Array.from({length:r+1},((e,s)=>{let t=0;for(let l=0;l<c.length;l++)"all"!==c[l].towerType&&i!==c[l].towerType||(t+=(0,h.QC)(a.upgrades.bottom_path[s]*c[l].costMultipiler)||0);return t})).reduce(((e,s)=>e+s),0),C.includes("BoxOfMonkey")&&d<=400?[{name:l,path:e.join(""),cost:m},{name:l,path:e.join(""),cost:m-d,boxOfMonkey:!0}]:[{name:l,path:e.join(""),cost:m}]})))).concat(l.map((e=>({name:e.tower,path:"",cost:k[e.tower].cost,isHero:!0})))).filter((e=>e.cost>0&&e.cost<=G)).sort(((e,s)=>s.cost-e.cost));console.log(e);const a=[],i=[];te.map((s=>{const t=e.find((e=>e.name===s.name&&e.path===s.path));t&&i.push(t)}));const d=i.reduce(((e,s)=>e+s.cost),0);ne({targetPrice:G-d,potentialTowers:e,towerLimit:H-(i.length>H?H:i.length),perTowerLimits:s.map((e=>({name:e.tower,remaining:e.max+n-i.filter((s=>s.name===e.tower)).length,isHero:!1}))).concat(l.map((e=>({name:e.tower,remaining:e.max,isHero:!0})))),block:e=>{e.length>=0&&a.push(i.concat(e))}}),console.log(a),I(E?a.filter((e=>0!==e.filter((e=>{var s,t,l;return(null!==(s=null===(t=N[e.name])||void 0===t?void 0:t.cost)&&void 0!==s?s:null===(l=k[e.name])||void 0===l?void 0:l.cost)<x[S].GameData.dcModel.startRules.cash+o})).length)).sort(((e,s)=>e.length-s.length)):a.sort(((e,s)=>e.length-s.length))),Y(!1)}};let oe=0;const ne=e=>{let{targetPrice:s,potentialTowers:t,towerLimit:l,perTowerLimits:a,block:i}=e;if(!i)return;if(0===s){if(O&&0!==l)return;return oe++,void i([])}if(s<0)return;if(0===l)return;if(0===t.length)return;if(oe>=2e3)return;const[o,...n]=t,{name:c,cost:r,boxOfMonkey:d}=o,m=a.findIndex((e=>c.includes(e.name)));0===a[m].remaining||W.includes(c)||ee.includes(c)||ne({targetPrice:s-r,potentialTowers:t.filter((e=>!d||!e.boxOfMonkey)),towerLimit:l-1,perTowerLimits:a.map((e=>e.isHero&&o.isHero?{...e,remaining:0}:e.name===c?{...e,remaining:e.remaining-1}:e)),block:e=>{i([o,...e])}}),ne({targetPrice:s,potentialTowers:n,towerLimit:l,perTowerLimits:a,block:e=>{i([...e])}})};return(0,o.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,o.jsx)("p",{className:"font-bold text-2xl py-2 font-display tracking-tighter text-accent",children:"Least Cash Reverse Calculator"}),(0,o.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,o.jsxs)("label",{className:"input input-bordered flex items-center gap-2",children:[(0,o.jsx)("img",{src:l,className:"w-[24px]"}),(0,o.jsx)("input",{className:"font-semibold text-2xl max-w-40",type:"text",inputMode:"numeric",placeholder:"Score",value:G,onChange:e=>{const s=e.target.value;(""===s||/^[0-9\b]*$/.test(s))&&R(Number(s))}})]}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("p",{className:"text-nowrap",children:"Select a CT event:"}),(0,o.jsx)("select",{id:"ct-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{console.log(e.target.options.selectedIndex)},value:t,children:e.map((e=>(0,o.jsxs)("option",{value:e.number,onClick:()=>a(e.number),children:[e.number," (",e.id,")"]},e.number)))})]}),(0,o.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,o.jsx)("button",{className:"btn w-24"+(S?"":" btn-disabled"),onClick:()=>document.getElementById("hero-modal").showModal(),children:"Heroes"}),(0,o.jsxs)("dialog",{id:"hero-modal",className:"modal",children:[(0,o.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,o.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Hero Filters"}),(0,o.jsxs)("p",{className:"py-4",children:["Add any heroes you want the calculation to ",(0,o.jsx)("u",{children:"ALWAYS"})," ","consider."," ",(0,o.jsx)("i",{children:"Note that bought hero levels are not calculated in this."})]}),(0,o.jsxs)("div",{className:"",children:[(0,o.jsxs)("div",{className:"flex w-full gap-4",children:[(0,o.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,o.jsx)("p",{className:"font-semibold",children:"Included Heroes"}),(0,o.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:Z.map(((e,s)=>(0,o.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...Z];console.log(e),e>=0&&s.splice(e,1),console.log(s),X(s)})(s),children:(0,o.jsx)(u.w,{name:"Delete",image:m.yc[e]},"".concat(e))})))})]}),(0,o.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,o.jsx)("p",{className:"font-semibold",children:"Excluded Heroes"}),(0,o.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:ee.map(((e,s)=>(0,o.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...ee];console.log(e),e>=0&&s.splice(e,1),console.log(s),se(s)})(s),children:(0,o.jsx)(u.w,{name:"Delete",image:m.yc[e]},"".concat(e))})))})]})]}),(0,o.jsx)("div",{className:"gap-y-2 flex flex-wrap my-4 w-full",children:S?Object.entries(x[S].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max))).map((e=>(0,o.jsx)("div",{className:"basis-1/2 px-4",children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("img",{src:m.yc[e[1].tower],className:"w-[28px]"}),(0,o.jsx)("span",{className:"label-text grow",children:(0,h.iS)(e[1].tower)}),(0,o.jsx)("button",{className:"btn outline outline-1",onClick:()=>(e=>{const s=[...Z];s.includes(e)||(s.push(e),console.log(s),X(s))})(e[1].tower),disabled:ee.includes(e[1].tower),children:"+"}),(0,o.jsx)("button",{className:"btn outline outline-1 outline-error text-error",onClick:()=>(e=>{const s=[...ee];s.includes(e)||(s.push(e),console.log(s),se(s))})(e[1].tower),disabled:Z.includes(e[1].tower),children:"x"})]})},e[0]))):null})]}),(0,o.jsx)("div",{className:"modal-action",children:(0,o.jsx)("form",{method:"dialog",children:(0,o.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,o.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,o.jsx)("button",{children:"close"})})]}),(0,o.jsx)("button",{className:"btn w-24"+(S?"":" btn-disabled"),onClick:()=>document.getElementById("tower-modal").showModal(),children:"Towers"}),(0,o.jsxs)("dialog",{id:"tower-modal",className:"modal",children:[(0,o.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,o.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Tower Filters"}),(0,o.jsxs)("p",{className:"py-4",children:["Add any towers and paths you want the calculation to"," ",(0,o.jsx)("u",{children:"ALWAYS"})," consider."]}),(0,o.jsxs)("div",{className:"",children:[(0,o.jsxs)("div",{className:"flex w-full gap-4",children:[(0,o.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,o.jsx)("p",{className:"font-semibold",children:"Included Towers"}),(0,o.jsxs)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:[$.map(((e,s)=>(0,o.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...$];console.log(e),e>=0&&s.splice(e,1),console.log(s),K(s)})(s),children:(0,o.jsx)(u.w,{name:"Delete",image:m.yc[e]},"".concat(e))}))),te.map(((e,s)=>(0,o.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...te];console.log(e),e>=0&&s.splice(e,1),console.log(s),le(s)})(s),children:(0,o.jsx)(u.w,{name:"Delete",image:m.yc[e.name],indicator:e.path},"".concat(e.path," ").concat(e.name))})))]})]}),(0,o.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,o.jsx)("p",{className:"font-semibold",children:"Excluded Towers"}),(0,o.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:W.map(((e,s)=>(0,o.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...W];console.log(e),e>=0&&s.splice(e,1),console.log(s),J(s)})(s),children:(0,o.jsx)(u.w,{name:"Delete",image:m.yc[e]},"".concat(e))})))})]})]}),(0,o.jsx)("div",{className:"gap-y-2 flex flex-wrap my-4 w-full",children:S?Object.entries(x[S].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max))).map((e=>(0,o.jsx)("div",{className:"basis-1/2 px-4",children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("img",{src:m.yc[e[1].tower],className:"w-[28px]"}),(0,o.jsx)("span",{className:"label-text grow",children:(0,h.iS)(e[1].tower)}),(0,o.jsx)("label",{className:"input input-bordered flex max-w-16",children:(0,o.jsx)("input",{className:"font-normal w-full",placeholder:"000",maxLength:3,id:"".concat(e[1].tower,"-path")})}),(0,o.jsx)("button",{className:"btn outline outline-1",onClick:()=>(e=>{const s=[...te],t=document.getElementById("".concat(e,"-path")).value,l=t.split("").map(Number);if(!t){const s=[...$];if(s.includes(e))return;return s.push(e),console.log(s),void K(s)}const a=[l].filter((e=>e.filter((e=>e>2)).length<=1)).filter((e=>e.filter((e=>0===e)).length>0)).filter((e=>0===e.filter((e=>e>5)).length)).flatMap((e=>e));console.log(a),0!==a.length?(s.push({name:e,path:t,cost:-1}),console.log(s),le(s)):console.log("INVALID PATH")})(e[1].tower),disabled:W.includes(e[1].tower),children:"+"}),(0,o.jsx)("button",{className:"btn outline outline-1 outline-error text-error",onClick:()=>(e=>{const s=[...W];s.includes(e)||(s.push(e),console.log(s),J(s))})(e[1].tower),disabled:$.includes(e[1].tower)||te.some((s=>s.name===e[1].tower)),children:"x"})]})},e[0]))):null})]}),(0,o.jsx)("div",{className:"modal-action",children:(0,o.jsx)("form",{method:"dialog",children:(0,o.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,o.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,o.jsx)("button",{children:"close"})})]}),(0,o.jsxs)("details",{className:"dropdown",children:[(0,o.jsx)("summary",{className:"btn w-24"+(S?"":" btn-disabled"),children:"Filters"}),(0,o.jsxs)("ul",{className:"py-4 shadow-xl menu dropdown-content z-[51] bg-base-100 rounded-box w-64 outline outline-white/25 outline-1",children:[(0,o.jsx)("li",{className:"pointer-events-none",children:(0,o.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Hero"})}),(0,o.jsx)("li",{children:(0,o.jsxs)("a",{onClick:()=>{B((e=>!e))},children:[(0,o.jsx)("p",{className:"font-medium text-sm",children:"Only show solutions with heroes."}),(0,o.jsx)("input",{type:"checkbox",checked:F,className:"checkbox checkbox-sm",readOnly:!0})]})}),(0,o.jsx)("li",{className:"pointer-events-none",children:(0,o.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Tower"})}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center mx-4",children:[(0,o.jsxs)("div",{className:"flex gap-2 items-center justify-center mx-4 w-full",children:[(0,o.jsx)("p",{className:"font-medium whitespace-nowrap",children:"Max Towers:"}),(0,o.jsx)("input",{type:"range",min:1,max:10,value:H,onChange:e=>{const s=e.target.value;_(s)},className:"range range-xs"}),(0,o.jsx)("p",{className:"text-lg font-medium",children:H})]}),(0,o.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,o.jsx)("li",{children:(0,o.jsxs)("a",{onClick:()=>{A((e=>!e))},children:[(0,o.jsxs)("p",{className:"font-medium text-sm",children:["Show solutions with exactly ",H," towers."," ",(0,o.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,o.jsx)("input",{type:"checkbox",checked:O,className:"checkbox checkbox-sm",readOnly:!0})]})}),(0,o.jsx)("li",{className:"pointer-events-none",children:(0,o.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Miscellaneous"})}),(0,o.jsx)("li",{children:(0,o.jsxs)("a",{onClick:()=>{L((e=>!e))},children:[(0,o.jsxs)("p",{className:"font-medium text-sm",children:["Hide initially unaffordable solutions."," ",(0,o.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,o.jsx)("input",{type:"checkbox",checked:E,className:"checkbox checkbox-sm",readOnly:!0})]})})]})]}),(0,o.jsx)("button",{className:"btn min-w-24 outline outline-1"+(V?" outline-warning text-warning":" outline-success text-success"),disabled:""===S,onClick:()=>{Y(!0),(async()=>{Y(!0)})()},children:V?"Loading...":"Calculate"})]})]}),ae?(0,o.jsx)(g.R,{}):(0,o.jsxs)("div",{className:"flex gap-2 py-5 w-full",children:[(0,o.jsx)(c.A,{data:x,loading:ae,selectedTile:S,gameType:"least_cash",changeTile:e=>{T(e),console.log(e),console.log(x[e]),x[e].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)).find((e=>"MonkeyVillage"===e.tower))&&console.log("uh oh... a village tile! that'll cause issues with calculations"),x[e].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).find((e=>"Geraldo"===e.tower))&&console.log("uh oh... a geraldo tile! that bozo has a bunch of items that cost cash! luckily all of his things cost the same at every level. HOWEVER, i am too lazy to implement that atm"),le([]),K([]),J([]),X([]),se([])}}),(0,o.jsx)("div",{className:"divider divider-horizontal",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10.605",height:"15.555",className:"fill-neutral-content overflow-visible",children:(0,o.jsx)("path",{d:"m2.828 15.555 7.777-7.779L2.828 0 0 2.828l4.949 4.948L0 12.727l2.828 2.828z"})})}),(0,o.jsx)(n,{data:x,eventRelics:y,loading:ae,relics:C,handleRelicFilterClick:e=>{const s=[...C];s.includes(e)?s.splice(s.indexOf(e),1):s.push(e),console.log(s),D(s)}})]}),(0,o.jsx)("div",{className:"divider",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10.605",height:"15.555",className:"fill-neutral-content overflow-visible rotate-90",children:(0,o.jsx)("path",{d:"m2.828 15.555 7.777-7.779L2.828 0 0 2.828l4.949 4.948L0 12.727l2.828 2.828z"})})}),(0,o.jsx)(p,{solutions:P.filter((e=>e.some((e=>(0===$.length||$.includes(e.name))&&(0===te.length||te.some((s=>s.name===e.name&&s.path===e.path)))))&&e.every((e=>!W.includes(e.name)&&!ee.includes(e.name)))&&e.some((e=>0===Z.length||Z.includes(e.name)))&&(!F||e.some((e=>e.isHero))))),solutionTile:z,solutionNum:Q,disableClear:""===S,clearSolutions:()=>{q(""),I([])}}),(0,o.jsx)("div",{className:"divider font-display",children:"Notes"}),(0,o.jsxs)("p",{className:"text-center",children:["This calculator is experimental! It's not guaranteed to work and things could be broken.",(0,o.jsx)("br",{}),"Thanks Josh Cheek (Spike Factory) for the base algorithm. Originally written in Ruby, then converted to TypeScript by me.",(0,o.jsx)("br",{}),"It's possible that the site crashes while doing calculations. All I can say right now is be nice with your parameters.",(0,o.jsx)("br",{}),"There is a hard cap of 2000 solutions.",(0,o.jsx)("br",{})]}),(0,o.jsx)("div",{className:"divider font-display",children:"Nerdy Stuff"}),(0,o.jsx)("p",{className:"text-center"}),(0,o.jsx)("p",{className:"font-semibold",children:"The algorithm works as follows:"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:"- Build data structure (an array) with all possible upgrade paths (000, 203, 051, etc.)"}),(0,o.jsx)("li",{children:"- Apply prices of available towers to possible upgrade paths, removing ones greater than the target score (user input)"}),(0,o.jsx)("li",{children:"- Apply any relic modifers and tower count restrictions"}),(0,o.jsx)("li",{children:"- Generate a ton of combinations (the computation heavy portion)"}),(0,o.jsx)("li",{children:"- Display solutions; hopefully ones with 1 or more high power towers (tiers 4-5; if applicable)"})]}),(0,o.jsx)("div",{className:"divider font-display"})]})}},9967:(e,s,t)=>{e.exports=t.p+"static/media/least_cash_s.39058b7c9ad6a6632888.webp"}}]);
//# sourceMappingURL=722.c903932f.chunk.js.map