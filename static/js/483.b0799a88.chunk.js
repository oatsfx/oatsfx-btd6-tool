"use strict";(self.webpackChunkoatsfx_btd6_tool=self.webpackChunkoatsfx_btd6_tool||[]).push([[483],{6229:(e,s,l)=>{l.d(s,{R:()=>i});const t=l.p+"static/media/loading.37ae948d2d0851756820.gif";var a=l(579);const i=e=>{let{size:s}=e;return(0,a.jsx)("img",{src:t,alt:"Loading",style:{width:s}})}},1589:(e,s,l)=>{l.d(s,{A:()=>t});const t=[{id:"m5k2an8p",number:64},{id:"m4q6vtme",number:63},{id:"m4q6ddt7",number:62},{id:"m4adofkk",number:61},{id:"m3rvyepv",number:60},{id:"m34yd7qs",number:59},{id:"m2kwlt60",number:58},{id:"m22b3l2q",number:57},{id:"m18f2i05",number:56},{id:"m0n34q7z",number:55},{id:"m05t53n4",number:54},{id:"lzt9vnfv",number:53},{id:"lywiirac",number:52},{id:"lygltxgu",number:51},{id:"lxo2ds1k",number:50},{id:"lx9ho5f2",number:49},{id:"lwsgoq2e",number:48},{id:"lw3zptqw",number:47},{id:"lvk1it2j",number:46},{id:"luub1xz5",number:45},{id:"lug12fgd",number:44},{id:"lts2aqan",number:43},{id:"ltkys2el",number:42},{id:"lswkbyus",number:41},{id:"ls2jg6ct",number:40},{id:"lrlbwtxn",number:39},{id:"lr3uz1d8",number:38},{id:"lqa43ghl",number:37},{id:"lq63jr4t",number:36},{id:"lphkfmue",number:35},{id:"lorujl6k",number:34},{id:"lo3dbb57",number:33},{id:"lncmwv1g",number:32},{id:"lndqbo35",number:31},{id:"lmpnzhq6",number:30},{id:"lm77zack",number:29},{id:"lleh5fpm",number:28},{id:"ll1f7vl8",number:27},{id:"lkj6emus",number:26},{id:"ljxai1s8",number:25},{id:"ljetrjjf",number:24},{id:"lisaoa37",number:23},{id:"lhzbbljg",number:22},{id:"lhgt6hxj",number:21},{id:"lgzmgxif",number:20},{id:"lgli8qmt",number:19},{id:"lg1ioh3o",number:18},{id:"lfbp5rsx",number:17},{id:"lenh39dp",number:16},{id:"ledh1q44",number:15},{id:"ldkqe7g6",number:14},{id:"ld2c7egr",number:13},{id:"lcjmdijk",number:12},{id:"lbn286o5",number:11},{id:"lbei2nd1",number:10},{id:"lau3vdb5",number:9},{id:"labw9mm1",number:8},{id:"l9qakvod",number:7},{id:"l9dkq0ma",number:6},{id:"l8t9h7wa",number:5},{id:"l884uw8u",number:4},{id:"l7i90j39",number:3},{id:"l76rtr72",number:2},{id:"l6efnna0",number:1}]},637:(e,s,l)=>{l.r(s),l.d(s,{default:()=>G});var t=l(9967),a=l(202),i=l(8817),o=l(8678),n=l(4811),r=l(550),c=l(7178),d=l(8638),m=l(5686),u=l(4618);const h=[{name:"Air and Sea",id:"AirAndSea",image:a,description:"Ace, Heli, Buccaneer and Sub have their placement and upgrade costs reduced by 5%, and their reload improved by 5% "},{name:"Box of Monkey",id:"BoxOfMonkey",image:i,description:"Start each game with one free Monkey costing $400 or less for unmodified initial placement."},{name:"Magic Monkeys",id:"MagicMonkeys",image:o,description:"Reduces cost of all Magic Monkeys by 8%."},{name:"Marching Boots",id:"MarchingBoots",image:n,description:"In restricted count games, give players +1 max count of each tower in their loadout or +4 total max count per game."},{name:"Military Monkeys",id:"MilitaryMonkeys",image:r,description:"Reduces cost of all Military Monkeys by 8%."},{name:"Monkey Tycoon",id:"MonkeyTycoon",image:c,description:"Get +1 of all Monkey Towers in your loadout and their base price is reduced by 4%."},{name:"Primary Primates",id:"PrimaryPrimates",image:d,description:"Reduces cost of all Primary Monkeys by 8%."},{name:"Support Simians",id:"SupportSimians",image:m,description:"Reduces cost of all Support Monkeys by 8%."},{name:"Starting Stash",id:"StartingStash",image:u,description:"Start each game with an extra 250 cash (stacks with More Cash on Regular Tiles)."}];var x=l(5043),p=l(579);const g=e=>{let{data:s,eventRelics:l,loading:t,relics:a,handleRelicFilterClick:i}=e;const[o,n]=(0,x.useState)([]),r=e=>{i(e.target.id)};return(0,x.useEffect)((()=>{let e=[];Object.entries(s).map((s=>{s[1].RelicType&&e.push(s[1].RelicType)})),n(e.concat(l))}),[s,l]),(0,p.jsxs)("div",{className:"w-2/3",children:[(0,p.jsx)("p",{className:"text-lg font-medium text-center",children:"Select some Relics"}),(0,p.jsx)("div",{className:"w-full",children:t?(0,p.jsxs)("div",{className:"flex flex-col gap-2 w-full py-2 items-center",children:[(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"}),(0,p.jsx)("div",{className:"skeleton h-6 w-full"})]}):h.map((e=>(0,p.jsx)("div",{className:"tooltip flex","data-tip":o.includes(e.id)?e.description:"Not available this event.",children:(0,p.jsxs)("label",{className:"label w-full"+(o.includes(e.id)?" cursor-pointer":" cursor-not-allowed opacity-40"),children:[(0,p.jsx)("img",{src:e.image,className:"w-[28px]"}),(0,p.jsx)("span",{className:"label-text",children:e.name}),(0,p.jsx)("input",{type:"checkbox",checked:a.includes(e.id),className:"checkbox checkbox-sm",id:e.id,disabled:!o.includes(e.id),onChange:r})]})},e.id)))})]})};var f=l(7280);const b=l.p+"static/media/selling_disabled.b93aa85cb5afbb0dff98.webp",j=l.p+"static/media/monkey_knowledge_disabled.b3f9bea9fde617f36ea8.webp";var w=l(642);const y=e=>{let{name:s,image:l,indicator:t,boxOfMonkey:a}=e;return(0,p.jsxs)("div",{className:"tooltip before:z-50 before:content-[attr(data-tip)] ","data-tip":(0,w.iS)(s),children:[t?(0,p.jsx)("span",{className:"indicator-item indicator-bottom indicator-center badge px-2 outline outline-white/25 outline-1 rounded-[4px] font-medium shadow-lg",children:t}):(0,p.jsx)(p.Fragment,{}),a?(0,p.jsx)("span",{className:"indicator-item indicator-top font-medium shadow-lg",children:(0,p.jsx)("img",{src:i,className:"w-[24px]"})}):(0,p.jsx)(p.Fragment,{}),(0,p.jsx)("div",{className:"avatar",children:(0,p.jsx)("div",{className:"w-8 rounded-full shadow outline outline-1 outline-white/25",children:(0,p.jsx)("img",{src:l})})})]})},v=e=>{var s;let{tileCode:l,tile:t}=e;return(0,p.jsxs)("div",{className:"indicator w-full flex flex-col outline outline-1 outline-white/50 rounded-xl items-center my-8 py-4 pb-6 bg-no-repeat bg-top bg-cover bg-clip-border "+f.Di[t.GameData.selectedMap],children:[(0,p.jsxs)("div",{className:"indicator-item indicator-top indicator-center badge badge-ghost font-semibold gap-1 px-5 py-3 outline outline-1 outline-white/25",children:[(0,p.jsx)("img",{src:f.pi[t.GameData.subGameType],className:"w-[16px]"}),(0,w.iS)((0,w.YY)(t.GameData.subGameType))]}),(0,p.jsx)("p",{className:"font-bold text-2xl text-center",children:l}),(0,p.jsxs)("p",{className:"font-medium text-md text-center",children:[(0,w.iS)(t.GameData.selectedMap)," //"," ",(0,w.iS)(t.GameData.selectedDifficulty)]}),(0,p.jsxs)("p",{className:"text-md text-center",children:["$".concat(null===(s=t.GameData.dcModel.startRules.cash)||void 0===s?void 0:s.toLocaleString()," // ")," ","Round ".concat(t.GameData.dcModel.startRules.round,"-").concat(t.GameData.dcModel.startRules.endRound)]}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 justify-center items-center",children:[t.GameData.dcModel.disableSelling?(0,p.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":"Selling Disabled",children:(0,p.jsx)("img",{src:b,className:"w-[34px]"})}):(0,p.jsx)(p.Fragment,{}),t.GameData.dcModel.disableMK?(0,p.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":"Monkey Knowledge Disabled",children:(0,p.jsx)("img",{src:j,className:"w-[34px]"})}):(0,p.jsx)(p.Fragment,{}),"Relic"===t.TileType?(0,p.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":(0,w.iS)(t.RelicType),children:(0,p.jsx)("img",{src:f.Gh[t.RelicType],className:"w-[34px]"})}):(0,p.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":(0,w.iS)(t.TileType),children:(0,p.jsx)("img",{src:f.fO[t.TileType],className:"w-[34px]"})})]}),t.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"divider px-4",children:t.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length>t.GameData.dcModel.towers._items.filter((e=>e.isHero)).length/2?"Heroes Excluded":"Heroes"}),(0,p.jsx)("div",{className:"flex flex-wrap gap-2 gap-y-3 justify-center",children:t.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length>t.GameData.dcModel.towers._items.filter((e=>e.isHero)).length/2?t.GameData.dcModel.towers._items.filter((e=>e.isHero&&0===e.max&&"ChosenPrimaryHero"!==e.tower)).map((e=>(0,p.jsx)(y,{name:e.tower,image:f.yc[e.tower]},e.tower))):t.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).map((e=>(0,p.jsx)(y,{name:e.tower,image:f.yc[e.tower]},e.tower)))})]}):null,(0,p.jsx)("div",{className:"divider px-4",children:"Towers"}),(0,p.jsx)("div",{className:"flex flex-wrap gap-2 gap-y-3 justify-center",children:t.GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)).map((e=>(0,p.jsx)(y,{name:e.tower,image:f.yc[e.tower],indicator:e.max>0?e.max:"\u221e"},e.tower)))})]})};var N=l(5393),k=l(7294),M=l(2905);const S=e=>{let{data:s,loading:l,selectedTile:t,relics:a,changeTile:i}=e;const[o,n]=(0,x.useState)("All"),[r,c]=(0,x.useState)({}),d=e=>{n(e.target.value)};return(0,x.useEffect)((()=>{const e=Object.keys(s).sort().reduce(((e,l)=>(8!==s[l].GameData.subGameType||"All"!==o&&s[l].TileType!==o||(e[l]=s[l]),e)),{});Object.keys(e).includes(t)||""===t||i(Object.keys(e).at(0)),c(e)}),[o,s]),(0,p.jsx)("div",{className:"w-full",children:(0,p.jsxs)("div",{className:"w-full justify-center",children:[(0,p.jsx)("p",{className:"text-lg font-medium text-center",children:"Select a Tile"}),l?(0,p.jsxs)("div",{className:"flex flex-col gap-2 w-full py-2 items-center",children:[(0,p.jsx)("div",{className:"skeleton h-12 w-full"}),(0,p.jsx)("div",{className:"skeleton h-3 w-full"}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,p.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,p.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,p.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,p.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,p.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex gap-4 py-1 justify-center",children:[(0,p.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,p.jsx)("input",{type:"radio",name:"radio-1",value:"Banner",className:"radio",checked:"Banner"===o,onChange:d}),(0,p.jsx)("img",{className:"w-[28px] py-2",src:N})]}),(0,p.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,p.jsx)("input",{type:"radio",name:"radio-1",value:"Relic",className:"radio",checked:"Relic"===o,onChange:d}),(0,p.jsx)("img",{className:"w-[28px] py-2",src:k})]}),(0,p.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,p.jsx)("input",{type:"radio",name:"radio-1",value:"Regular",className:"radio",checked:"Regular"===o||"TeamFirstCapture"===o,onChange:d}),(0,p.jsx)("img",{className:"w-[28px] py-2",src:M})]}),(0,p.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,p.jsx)("input",{type:"radio",name:"radio-1",value:"All",className:"radio",checked:"All"===o,onChange:d}),(0,p.jsx)("p",{className:"text-sm py-3",children:"All"})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,p.jsxs)("select",{id:"tile-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{const s=e.target.value;i(s)},defaultValue:"Select a tile",children:[(0,p.jsx)("option",{disabled:!0,children:"Select a tile"}),Object.entries(r).map((e=>(0,p.jsx)("option",{id:e[0],children:e[0]},e[0])))]}),(0,p.jsxs)("details",{className:"dropdown dropdown-right dropdown-center",children:[(0,p.jsx)("summary",{className:"btn w-24",children:"Quick Relic"}),(0,p.jsx)("ul",{className:"p-2 shadow-xl menu dropdown-content z-[1] bg-base-100 rounded-box w-52 outline outline-white/25 outline-1",children:Object.entries(s).map((e=>"Relic"===e[1].TileType&&8===e[1].GameData.subGameType?(0,p.jsx)("li",{children:(0,p.jsxs)("a",{id:e[0],onClick:s=>{((e,s)=>{n("Relic"),i(s),document.getElementById("tile-select").value=e.target.id})(s,e[0])},children:[(0,p.jsx)("img",{className:"w-[20px]",src:f.Gh[e[1].RelicType]}),(0,w.iS)(e[1].RelicType)]})},e[1].RelicType):null))})]})]}),t?(0,p.jsx)(v,{tileCode:t,tile:s[t]}):(0,p.jsx)("p",{className:"text-center",children:"No tile selected."})]})]})})},T={Easy:.85,Medium:1,Hard:1.08},C=e=>{let{solution:s}=e;return(0,p.jsx)("div",{className:"indicator gap-3 items-center px-12 justify-center border-b border-white/25 py-4",children:s.sort(((e,s)=>s.cost-e.cost)).map(((e,s)=>(0,p.jsx)(y,{name:"".concat(e.name,": $").concat(e.cost.toLocaleString()).concat(e.boxOfMonkey?"*":""),image:f.yc[e.name],indicator:e.path,boxOfMonkey:e.boxOfMonkey},s)))})},_=e=>{let{solutions:s,solutionTile:l,solutionNum:t,disableClear:a,clearSolutions:i}=e;return(0,p.jsxs)("div",{className:"w-full",children:[(0,p.jsxs)("p",{className:"text-lg font-bold text-center",children:["Possible Solutions",l?" for ".concat(l," in CT").concat(t):""]}),s.length>0?(0,p.jsxs)("div",{className:"overflow-y-scroll max-h-96 h-96 my-4 py-4 px-12 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,p.jsx)("p",{className:"font-semibold",children:"Solutions"}),(0,p.jsx)("div",{className:"flex flex-wrap w-full gap-x-2 px-2 items-center justify-center",children:s.map(((e,s)=>(0,p.jsx)(C,{solution:e},s)))})]}):(0,p.jsx)("p",{className:"text-center",children:"Solutions will appear here."}),(0,p.jsxs)("p",{className:"text-center italic",children:["Showing ",s.length," total solution",1===s.length?"":"s","."]}),(0,p.jsx)("div",{className:"flex gap-4 items-center justify-center py-2",children:(0,p.jsx)("button",{className:"btn min-w-24 outline outline-1 outline-error text-error",disabled:a,onClick:i,children:"Clear"})})]})};var D=l(1589);var R=l(6229);const G=()=>{const[e,s]=(0,x.useState)(D.A[0].number),{data:l,loading:a}=(e=>{const s="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/tiles.json",[l,t]=(0,x.useState)({}),[a,i]=(0,x.useState)(!0);return(0,x.useMemo)((()=>{(async()=>{try{const e=await fetch(s);if(!e.ok)throw new Error("Failed to fetch data");const l=await e.json();t(l),console.log(l)}catch(e){console.log(e)}finally{i(!1)}})()}),[e]),{data:l,loading:a}})(e),{data:i,loading:o}=(e=>{const s="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/event_relics.json",[l,t]=(0,x.useState)([]),[a,i]=(0,x.useState)(!0);return(0,x.useMemo)((()=>{(async()=>{try{const e=await fetch(s);if(!e.ok)throw new Error("Failed to fetch data");const l=await e.json();t(l),console.log(l)}catch(e){console.log(e)}finally{i(!1)}})()}),[e]),{data:l,loading:a}})(e),{data:n,loading:r}=(()=>{const e="https://raw.githubusercontent.com/hemisemidemipresent/cyberquincy/master/jsons/costs.json",[s,l]=(0,x.useState)({}),[t,a]=(0,x.useState)(!0);return(0,x.useEffect)((()=>{(async()=>{try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const t=await s.json();Object.entries(t).forEach((e=>{t[e[0].replace("druid_monkey","Druid").replace("engineer","EngineerMonkey").replace(/(_\w)/g,(e=>e[1].toUpperCase())).replace(/^./,(e=>e.toUpperCase()))]=t[e[0]],delete t[e[0]]})),l(t)}catch(s){console.log(s)}finally{a(!1)}})()}),[e]),{data:s,loading:t}})(),{data:c,loading:d}=(()=>{const e="https://raw.githubusercontent.com/hemisemidemipresent/cyberquincy/master/jsons/heroes.json",[s,l]=(0,x.useState)({}),[t,a]=(0,x.useState)(!0);return(0,x.useEffect)((()=>{(async()=>{try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const t=await s.json();Object.entries(t).forEach((e=>{t[e[0].replace("brickell","AdmiralBrickell").replace("churchill","CaptainChurchill").replace("gwen","Gwendolin").replace("jones","StrikerJones").replace("obyn","ObynGreenfoot").replace("pat","PatFusty").replace(/(_\w)/g,(e=>e[1].toUpperCase())).replace(/^./,(e=>e.toUpperCase()))]=t[e[0]],delete t[e[0]]})),l(t)}catch(s){console.log(s)}finally{a(!1)}})()}),[e]),{data:s,loading:t}})(),[m,u]=(0,x.useState)(""),[h,b]=(0,x.useState)([]),[j,v]=(0,x.useState)(0),[N,k]=(0,x.useState)(2),[M,C]=(0,x.useState)(!1),[G,H]=(0,x.useState)(!0),[A,O]=(0,x.useState)(!1),[B,z]=(0,x.useState)([]),[E,L]=(0,x.useState)(""),[F,q]=(0,x.useState)(0),[P,I]=(0,x.useState)(!1),[K,Q]=(0,x.useState)([]),[Y,$]=(0,x.useState)([]),[U,V]=(0,x.useState)([]),[W,J]=(0,x.useState)([]),[X,Z]=(0,x.useState)([]),ee=a||r||d||o;(0,x.useEffect)((()=>{P&&setTimeout((()=>{se()}),1)}),[P]);const se=()=>{const s=[],t=l[m].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)),a=l[m].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max));console.log(t);const i=h.includes("MonkeyTycoon")?1:0,o=h.includes("MarchingBoots")?1:0,r=h.includes("StartingStash")?250:0,d=i+o,u=[{towerType:"all",costMultipiler:T[l[m].GameData.selectedDifficulty]}];h.includes("AirAndSea")&&u.push({towerType:"military",costMultipiler:.95}),h.includes("MilitaryMonkeys")&&u.push({towerType:"military",costMultipiler:.92}),h.includes("MagicMonkeys")&&u.push({towerType:"magic",costMultipiler:.92}),h.includes("MonkeyTycoon")&&u.push({towerType:"all",costMultipiler:.96}),h.includes("PrimaryPrimates")&&u.push({towerType:"primary",costMultipiler:.92}),h.includes("SupportSimians")&&u.push({towerType:"support",costMultipiler:.92}),console.log(u),console.log(c);for(let e=0;e<6;e++)for(let l=0;l<6;l++)for(let t=0;t<6;t++)s.push([e,l,t]);const x=s.filter(((e,s,l)=>l.indexOf(e)===s)).filter((e=>e.filter((e=>e>2)).length<=1)).filter((e=>e.filter((e=>0===e)).length>0)).sort();if(""!==m){L(m),q(e);const s=x.flatMap((e=>Object.entries(n).flatMap((s=>{let[l,a]=s;if(!t.find((e=>l.includes(e.tower))))return{name:l,path:"",cost:-1};const i=w.HK[l],[o,n,r]=e,c=(0,w.QC)(a.cost*u[0].costMultipiler);let d=c+Array.from({length:o+1},((e,s)=>{let l=0;for(let t=0;t<u.length;t++)"all"!==u[t].towerType&&i!==u[t].towerType||(l+=(0,w.QC)(a.upgrades.top_path[s]*u[t].costMultipiler)||0);return l})).reduce(((e,s)=>e+s),0);return d+=Array.from({length:n+1},((e,s)=>{let l=0;for(let t=0;t<u.length;t++)"all"!==u[t].towerType&&i!==u[t].towerType||(l+=(0,w.QC)(a.upgrades.middle_path[s]*u[t].costMultipiler)||0);return l})).reduce(((e,s)=>e+s),0),d+=Array.from({length:r+1},((e,s)=>{let l=0;for(let t=0;t<u.length;t++)"all"!==u[t].towerType&&i!==u[t].towerType||(l+=(0,w.QC)(a.upgrades.bottom_path[s]*u[t].costMultipiler)||0);return l})).reduce(((e,s)=>e+s),0),h.includes("BoxOfMonkey")&&c<=400?[{name:l,path:e.join(""),cost:d},{name:l,path:e.join(""),cost:d-c,boxOfMonkey:!0}]:[{name:l,path:e.join(""),cost:d}]})))).concat(a.map((e=>({name:e.tower,path:"",cost:c[e.tower].cost,isHero:!0})))).filter((e=>e.cost>0&&e.cost<=j)).sort(((e,s)=>s.cost-e.cost));console.log(s);const i=[],o=[];X.map((e=>{const l=s.find((s=>s.name===e.name&&s.path===e.path));l&&o.push(l)}));const p=o.reduce(((e,s)=>e+s.cost),0);te({targetPrice:j-p,potentialTowers:s,towerLimit:N-(o.length>N?N:o.length),perTowerLimits:t.map((e=>({name:e.tower,remaining:e.max+d-o.filter((s=>s.name===e.tower)).length,isHero:!1}))).concat(a.map((e=>({name:e.tower,remaining:e.max,isHero:!0})))),block:e=>{e.length>=0&&i.push(o.concat(e))}}),console.log(i),z(G?i.filter((e=>0!==e.filter((e=>{var s,t,a;return(null!==(s=null===(t=n[e.name])||void 0===t?void 0:t.cost)&&void 0!==s?s:null===(a=c[e.name])||void 0===a?void 0:a.cost)<l[m].GameData.dcModel.startRules.cash+r})).length)).sort(((e,s)=>e.length-s.length)):i.sort(((e,s)=>e.length-s.length))),I(!1)}};let le=0;const te=e=>{let{targetPrice:s,potentialTowers:l,towerLimit:t,perTowerLimits:a,block:i}=e;if(!i)return;if(0===s){if(M&&0!==t)return;return le++,void i([])}if(s<0)return;if(0===t)return;if(0===l.length)return;if(le>=2e3)return;const[o,...n]=l,{name:r,cost:c,boxOfMonkey:d}=o,m=a.findIndex((e=>r.includes(e.name)));0===a[m].remaining||Y.includes(r)||W.includes(r)||te({targetPrice:s-c,potentialTowers:l.filter((e=>!d||!e.boxOfMonkey)),towerLimit:t-1,perTowerLimits:a.map((e=>e.isHero&&o.isHero?{...e,remaining:0}:e.name===r?{...e,remaining:e.remaining-1}:e)),block:e=>{i([o,...e])}}),te({targetPrice:s,potentialTowers:n,towerLimit:t,perTowerLimits:a,block:e=>{i([...e])}})};return(0,p.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,p.jsx)("p",{className:"font-bold text-2xl py-2 font-display tracking-tighter text-accent",children:"Least Cash Reverse Calculator"}),(0,p.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,p.jsxs)("label",{className:"input input-bordered flex items-center gap-2",children:[(0,p.jsx)("img",{src:t,className:"w-[24px]"}),(0,p.jsx)("input",{className:"font-semibold text-2xl max-w-40",type:"text",inputMode:"numeric",placeholder:"Score",value:j,onChange:e=>{const s=e.target.value;(""===s||/^[0-9\b]*$/.test(s))&&v(Number(s))}})]}),(0,p.jsxs)("div",{className:"flex items-center gap-4",children:[(0,p.jsx)("p",{className:"text-nowrap",children:"Select a CT event:"}),(0,p.jsx)("select",{id:"ct-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{console.log(e.target.options.selectedIndex)},value:e,children:D.A.map((e=>(0,p.jsxs)("option",{value:e.number,onClick:()=>s(e.number),children:[e.number," (",e.id,")"]},e.number)))})]}),(0,p.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,p.jsx)("button",{className:"btn w-24"+(m?"":" btn-disabled"),onClick:()=>document.getElementById("hero-modal").showModal(),children:"Heroes"}),(0,p.jsxs)("dialog",{id:"hero-modal",className:"modal",children:[(0,p.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,p.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Hero Filters"}),(0,p.jsxs)("p",{className:"py-4",children:["Add any heroes you want the calculation to ",(0,p.jsx)("u",{children:"ALWAYS"})," ","consider."," ",(0,p.jsx)("i",{children:"Note that bought hero levels are not calculated in this."})]}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsxs)("div",{className:"flex w-full gap-4",children:[(0,p.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,p.jsx)("p",{className:"font-semibold",children:"Included Heroes"}),(0,p.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:U.map(((e,s)=>(0,p.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...U];console.log(e),e>=0&&s.splice(e,1),console.log(s),V(s)})(s),children:(0,p.jsx)(y,{name:"Delete",image:f.yc[e]},"".concat(e))})))})]}),(0,p.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,p.jsx)("p",{className:"font-semibold",children:"Excluded Heroes"}),(0,p.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:W.map(((e,s)=>(0,p.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...W];console.log(e),e>=0&&s.splice(e,1),console.log(s),J(s)})(s),children:(0,p.jsx)(y,{name:"Delete",image:f.yc[e]},"".concat(e))})))})]})]}),(0,p.jsx)("div",{className:"gap-y-2 flex flex-wrap my-4 w-full",children:m?Object.entries(l[m].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max))).map((e=>(0,p.jsx)("div",{className:"basis-1/2 px-4",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("img",{src:f.yc[e[1].tower],className:"w-[28px]"}),(0,p.jsx)("span",{className:"label-text grow",children:(0,w.iS)(e[1].tower)}),(0,p.jsx)("button",{className:"btn outline outline-1",onClick:()=>(e=>{const s=[...U];s.includes(e)||(s.push(e),console.log(s),V(s))})(e[1].tower),disabled:W.includes(e[1].tower),children:"+"}),(0,p.jsx)("button",{className:"btn outline outline-1 outline-error text-error",onClick:()=>(e=>{const s=[...W];s.includes(e)||(s.push(e),console.log(s),J(s))})(e[1].tower),disabled:U.includes(e[1].tower),children:"x"})]})},e[0]))):null})]}),(0,p.jsx)("div",{className:"modal-action",children:(0,p.jsx)("form",{method:"dialog",children:(0,p.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,p.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,p.jsx)("button",{children:"close"})})]}),(0,p.jsx)("button",{className:"btn w-24"+(m?"":" btn-disabled"),onClick:()=>document.getElementById("tower-modal").showModal(),children:"Towers"}),(0,p.jsxs)("dialog",{id:"tower-modal",className:"modal",children:[(0,p.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,p.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Tower Filters"}),(0,p.jsxs)("p",{className:"py-4",children:["Add any towers and paths you want the calculation to"," ",(0,p.jsx)("u",{children:"ALWAYS"})," consider."]}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsxs)("div",{className:"flex w-full gap-4",children:[(0,p.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,p.jsx)("p",{className:"font-semibold",children:"Included Towers"}),(0,p.jsxs)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:[K.map(((e,s)=>(0,p.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...K];console.log(e),e>=0&&s.splice(e,1),console.log(s),Q(s)})(s),children:(0,p.jsx)(y,{name:"Delete",image:f.yc[e]},"".concat(e))}))),X.map(((e,s)=>(0,p.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...X];console.log(e),e>=0&&s.splice(e,1),console.log(s),Z(s)})(s),children:(0,p.jsx)(y,{name:"Delete",image:f.yc[e.name],indicator:e.path},"".concat(e.path," ").concat(e.name))})))]})]}),(0,p.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,p.jsx)("p",{className:"font-semibold",children:"Excluded Towers"}),(0,p.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:Y.map(((e,s)=>(0,p.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...Y];console.log(e),e>=0&&s.splice(e,1),console.log(s),$(s)})(s),children:(0,p.jsx)(y,{name:"Delete",image:f.yc[e]},"".concat(e))})))})]})]}),(0,p.jsx)("div",{className:"gap-y-2 flex flex-wrap my-4 w-full",children:m?Object.entries(l[m].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max))).map((e=>(0,p.jsx)("div",{className:"basis-1/2 px-4",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("img",{src:f.yc[e[1].tower],className:"w-[28px]"}),(0,p.jsx)("span",{className:"label-text grow",children:(0,w.iS)(e[1].tower)}),(0,p.jsx)("label",{className:"input input-bordered flex max-w-16",children:(0,p.jsx)("input",{className:"font-normal w-full",placeholder:"000",maxLength:3,id:"".concat(e[1].tower,"-path")})}),(0,p.jsx)("button",{className:"btn outline outline-1",onClick:()=>(e=>{const s=[...X],l=document.getElementById("".concat(e,"-path")).value,t=l.split("").map(Number);if(!l){const s=[...K];if(s.includes(e))return;return s.push(e),console.log(s),void Q(s)}const a=[t].filter((e=>e.filter((e=>e>2)).length<=1)).filter((e=>e.filter((e=>0===e)).length>0)).filter((e=>0===e.filter((e=>e>5)).length)).flatMap((e=>e));console.log(a),0!==a.length?(s.push({name:e,path:l,cost:-1}),console.log(s),Z(s)):console.log("INVALID PATH")})(e[1].tower),disabled:Y.includes(e[1].tower),children:"+"}),(0,p.jsx)("button",{className:"btn outline outline-1 outline-error text-error",onClick:()=>(e=>{const s=[...Y];s.includes(e)||(s.push(e),console.log(s),$(s))})(e[1].tower),disabled:K.includes(e[1].tower)||X.some((s=>s.name===e[1].tower)),children:"x"})]})},e[0]))):null})]}),(0,p.jsx)("div",{className:"modal-action",children:(0,p.jsx)("form",{method:"dialog",children:(0,p.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,p.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,p.jsx)("button",{children:"close"})})]}),(0,p.jsxs)("details",{className:"dropdown",children:[(0,p.jsx)("summary",{className:"btn w-24"+(m?"":" btn-disabled"),children:"Filters"}),(0,p.jsxs)("ul",{className:"py-4 shadow-xl menu dropdown-content z-[51] bg-base-100 rounded-box w-64 outline outline-white/25 outline-1",children:[(0,p.jsx)("li",{className:"pointer-events-none",children:(0,p.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Hero"})}),(0,p.jsx)("li",{children:(0,p.jsxs)("a",{onClick:()=>{O((e=>!e))},children:[(0,p.jsx)("p",{className:"font-medium text-sm",children:"Only show solutions with heroes."}),(0,p.jsx)("input",{type:"checkbox",checked:A,className:"checkbox checkbox-sm",readOnly:!0})]})}),(0,p.jsx)("li",{className:"pointer-events-none",children:(0,p.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Tower"})}),(0,p.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center mx-4",children:[(0,p.jsxs)("div",{className:"flex gap-2 items-center justify-center mx-4 w-full",children:[(0,p.jsx)("p",{className:"font-medium whitespace-nowrap",children:"Max Towers:"}),(0,p.jsx)("input",{type:"range",min:1,max:10,value:N,onChange:e=>{const s=e.target.value;k(s)},className:"range range-xs"}),(0,p.jsx)("p",{className:"text-lg font-medium",children:N})]}),(0,p.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,p.jsx)("li",{children:(0,p.jsxs)("a",{onClick:()=>{C((e=>!e))},children:[(0,p.jsxs)("p",{className:"font-medium text-sm",children:["Show solutions with exactly ",N," towers."," ",(0,p.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,p.jsx)("input",{type:"checkbox",checked:M,className:"checkbox checkbox-sm",readOnly:!0})]})}),(0,p.jsx)("li",{className:"pointer-events-none",children:(0,p.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Miscellaneous"})}),(0,p.jsx)("li",{children:(0,p.jsxs)("a",{onClick:()=>{H((e=>!e))},children:[(0,p.jsxs)("p",{className:"font-medium text-sm",children:["Hide initially unaffordable solutions."," ",(0,p.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,p.jsx)("input",{type:"checkbox",checked:G,className:"checkbox checkbox-sm",readOnly:!0})]})})]})]}),(0,p.jsx)("button",{className:"btn min-w-24 outline outline-1"+(P?" outline-warning text-warning":" outline-success text-success"),disabled:""===m,onClick:()=>{I(!0),(async()=>{I(!0)})()},children:P?"Loading...":"Calculate"})]})]}),ee?(0,p.jsx)(R.R,{}):(0,p.jsxs)("div",{className:"flex gap-2 py-5 w-full",children:[(0,p.jsx)(S,{data:l,loading:ee,selectedTile:m,changeTile:e=>{u(e),console.log(e),console.log(l[e]),l[e].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)).find((e=>"MonkeyVillage"===e.tower))&&console.log("uh oh... a village tile! that'll cause issues with calculations"),l[e].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).find((e=>"Geraldo"===e.tower))&&console.log("uh oh... a geraldo tile! that bozo has a bunch of items that cost cash! luckily all of his things cost the same at every level. HOWEVER, i am too lazy to implement that atm"),Z([]),Q([]),$([]),V([]),J([])},relics:h}),(0,p.jsx)("div",{className:"divider divider-horizontal",children:(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10.605",height:"15.555",className:"fill-neutral-content overflow-visible",children:(0,p.jsx)("path",{d:"m2.828 15.555 7.777-7.779L2.828 0 0 2.828l4.949 4.948L0 12.727l2.828 2.828z"})})}),(0,p.jsx)(g,{data:l,eventRelics:i,loading:ee,relics:h,handleRelicFilterClick:e=>{const s=[...h];s.includes(e)?s.splice(s.indexOf(e),1):s.push(e),console.log(s),b(s)}})]}),(0,p.jsx)("div",{className:"divider",children:(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10.605",height:"15.555",className:"fill-neutral-content overflow-visible rotate-90",children:(0,p.jsx)("path",{d:"m2.828 15.555 7.777-7.779L2.828 0 0 2.828l4.949 4.948L0 12.727l2.828 2.828z"})})}),(0,p.jsx)(_,{solutions:B.filter((e=>e.some((e=>(0===K.length||K.includes(e.name))&&(0===X.length||X.some((s=>s.name===e.name&&s.path===e.path)))))&&e.every((e=>!Y.includes(e.name)&&!W.includes(e.name)))&&e.some((e=>0===U.length||U.includes(e.name)))&&(!A||e.some((e=>e.isHero))))),solutionTile:E,solutionNum:F,disableClear:""===m,clearSolutions:()=>{L(""),z([])}}),(0,p.jsx)("div",{className:"divider font-display",children:"Notes"}),(0,p.jsxs)("p",{className:"text-center",children:["This calculator is experimental! It's not guaranteed to work and things could be broken.",(0,p.jsx)("br",{}),"Thanks Josh Cheek (Spike Factory) for the base algorithm. Originally written in Ruby, then converted to TypeScript by me.",(0,p.jsx)("br",{}),"It's possible that the site crashes while doing calculations. All I can say right now is be nice with your parameters.",(0,p.jsx)("br",{}),"There is a hard cap of 2000 solutions.",(0,p.jsx)("br",{})]}),(0,p.jsx)("div",{className:"divider font-display",children:"Nerdy Stuff"}),(0,p.jsx)("p",{className:"text-center"}),(0,p.jsx)("p",{className:"font-semibold",children:"The algorithm works as follows:"}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:"- Build data structure (an array) with all possible upgrade paths (000, 203, 051, etc.)"}),(0,p.jsx)("li",{children:"- Apply prices of available towers to possible upgrade paths, removing ones greater than the target score (user input)"}),(0,p.jsx)("li",{children:"- Apply any relic modifers and tower count restrictions"}),(0,p.jsx)("li",{children:"- Generate a ton of combinations (the computation heavy portion)"}),(0,p.jsx)("li",{children:"- Display solutions; hopefully ones with 1 or more high power towers (tiers 4-5; if applicable)"})]}),(0,p.jsx)("div",{className:"divider font-display"})]})}},642:(e,s,l)=>{l.d(s,{Ei:()=>m,F$:()=>x,HK:()=>g,QC:()=>a,Us:()=>u,YG:()=>h,YY:()=>p,be:()=>c,fF:()=>o,fh:()=>r,iS:()=>n,u3:()=>d,vp:()=>f,xX:()=>i});var t=l(7280);const a=e=>e%5===2.5?5*Math.floor(e/5):5*Math.round(e/5),i=e=>{const s=Math.floor(e/36e5),l=Math.floor(e%36e5/6e4),t=Math.floor(e%6e4/1e3),a=Math.floor(e%1e3/10),i=s>0?s.toString().padStart(2,"0"):"",o=l.toString().padStart(2,"0"),n=t.toString().padStart(2,"0"),r=a.toString().padStart(2,"0");return i?"".concat(i,":").concat(o,":").concat(n,".").concat(r):"".concat(o,":").concat(n,".").concat(r)},o=e=>{const s=Date.now()-e,l=6e4,t=36e5,a=864e5;if(s<l){const e=Math.floor(s/1e3);return"".concat(e," second").concat(1!==e?"s":""," ago")}if(s<t){const e=Math.floor(s/l);return"".concat(e," minute").concat(1!==e?"s":""," ago")}if(s<a){const e=Math.floor(s/t);return"".concat(e," hour").concat(1!==e?"s":""," ago")}{const e=Math.floor(s/a);return"".concat(e," day").concat(1!==e?"s":""," ago")}},n=e=>e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b(Or|The|A|Of)\b/g,(e=>e.toLowerCase())),r=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),c=(e,s)=>{const l=e/s*100;return 1===e?t.R8.black_diamond:2===e?t.R8.red_diamond:3===e?t.R8.diamond:e<=50?t.R8.gold_diamond:l<=1?t.R8.double_gold:l<=10?t.R8.gold_silver:l<=25?t.R8.double_silver:l<=50?t.R8.silver:l<=75?t.R8.bronze:""},d=(e,s)=>{const l=e/s*100;return 1===e?t.oD.black_diamond:2===e?t.oD.red_diamond:3===e?t.oD.diamond:e<=50?t.oD.gold_diamond:l<=1?t.oD.double_gold:l<=10?t.oD.gold_silver:l<=25?t.oD.double_silver:l<=50?t.oD.silver:l<=75?t.oD.bronze:""},m=(e,s)=>{const l=e/s*100;return 1===e?t.o9.black_diamond:2===e?t.o9.red_diamond:3===e?t.o9.diamond:e<=50?t.o9.gold_diamond:l<=1?t.o9.double_gold:l<=10?t.o9.gold_silver:l<=25?t.o9.double_silver:l<=50?t.o9.silver:l<=75?t.o9.bronze:""},u=(e,s)=>{const l=e/s*100;return e<=25?t.Ks.diamond:e<=100?t.Ks.gold_diamond:l<=1?t.Ks.double_gold:l<=10?t.Ks.gold_silver:l<=25?t.Ks.double_silver:l<=50?t.Ks.silver:l<=75?t.Ks.bronze:""},h=(e,s)=>{const l=e/s*100;return 1===e?t.oh.black_diamond:2===e?t.oh.red_diamond:3===e?t.oh.diamond:e<=25?t.oh.gold_diamond:e<=100?t.oh.double_gold:l<=1?t.oh.gold_silver:l<=10?t.oh.double_silver:l<=25?t.oh.silver:l<=75?t.oh.bronze:""},x=e=>{const s=e%10,l=e%100;return 1===s&&11!==l?e+"st":2===s&&12!==l?e+"nd":3===s&&13!==l?e+"rd":e+"th"},p=e=>{switch(e){case 2:return"Race";case 4:return"Boss";case 8:return"LeastCash";case 9:return"LeastTiers";default:return""}},g={Alchemist:"magic",BananaFarm:"support",BeastHandler:"support",BoomerangMonkey:"primary",BombShooter:"primary",DartMonkey:"primary",DartlingGunner:"military",Druid:"magic",EngineerMonkey:"support",GlueGunner:"primary",HeliPilot:"military",IceMonkey:"primary",Mermonkey:"magic",MonkeyAce:"military",MonkeyBuccaneer:"military",MonkeySub:"military",MonkeyVillage:"support",MortarMonkey:"military",NinjaMonkey:"magic",SniperMonkey:"military",SpikeFactory:"support",SuperMonkey:"magic",TackShooter:"primary",WizardMonkey:"magic",AdmiralBrickell:"hero",Adora:"hero",Benjamin:"hero",CaptainChurchill:"hero",Corvus:"hero",Etienne:"hero",Ezili:"hero",Geraldo:"hero",Gwendolin:"hero",ObynGreenfoot:"hero",PatFusty:"hero",Psi:"hero",Quincy:"hero",Rosalia:"hero",Sauda:"hero",StrikerJones:"hero",ChosenPrimaryHero:"hero"},f={Race:"Race",Boss:"Boss",Boss2:"Boss",Boss3:"Boss",Boss4:"Boss",CtPlayer:"Contested Territory",CtTeam:"Contested Territory"}},9967:(e,s,l)=>{e.exports=l.p+"static/media/least_cash_s.39058b7c9ad6a6632888.webp"}}]);
//# sourceMappingURL=483.b0799a88.chunk.js.map