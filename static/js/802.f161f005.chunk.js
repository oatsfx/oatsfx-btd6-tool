"use strict";(self.webpackChunkoatsfx_btd6_tool=self.webpackChunkoatsfx_btd6_tool||[]).push([[802],{7080:(e,a,t)=>{t.d(a,{j:()=>o});var s=t(5043);const o=e=>{const a="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/event_relics.json",[t,o]=(0,s.useState)([]),[l,n]=(0,s.useState)(!0);return(0,s.useMemo)((()=>{(async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();o(t),console.log(t)}catch(e){console.log(e)}finally{n(!1)}})()}),[e]),{data:t,loading:l}}},8424:(e,a,t)=>{t.d(a,{g:()=>o});var s=t(5043);const o=()=>{const[e,a]=(0,s.useState)([]),[t,o]=(0,s.useState)(!0);return(0,s.useMemo)((()=>{(async()=>{try{const e=await fetch("https://storage.googleapis.com/btd6-ct-map/event-seeds.json");if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json(),s=t.flatMap(((e,a)=>e?[{id:e,number:a}]:[]));s.reverse(),a(s),console.log(t)}catch(e){console.log(e)}finally{o(!1)}})()}),[]),{data:e,loading:t}}},4409:(e,a,t)=>{t.d(a,{P:()=>o});var s=t(5043);const o=function(e,a,t,o){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const[n,c]=(0,s.useState)({}),[i,r]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[h,b]=(0,s.useState)(!1);return(0,s.useMemo)((()=>{const s="https://data.ninjakiwi.com/btd6/bosses/",n="https://data.ninjakiwi.com/btd6/ct/",i={mode:"cors"};(async()=>{m(!0),b(!1),console.log("fetching leaderboards");try{let d="";if("Race"===e){const e=await fetch("https://data.ninjakiwi.com/btd6/races/"),t=await e.json();r(t.body),d=t.body[a].leaderboard}else if("Boss"===e){const e=await fetch(s),t=await e.json();r(t.body),d="Elite"===o?t.body[a].leaderboard_elite_players_1:t.body[a].leaderboard_standard_players_1}else if("Boss2"===e){const e=await fetch(s),t=await e.json();r(t.body),d="Elite"===o?t.body[a].leaderboard_elite_players_1.slice(0,-1)+"2":t.body[a].leaderboard_standard_players_1.slice(0,-1)+"2"}else if("Boss3"===e){const e=await fetch(s),t=await e.json();r(t.body),d="Elite"===o?t.body[a].leaderboard_elite_players_1.slice(0,-1)+"3":t.body[a].leaderboard_standard_players_1.slice(0,-1)+"3"}else if("Boss4"===e){const e=await fetch(s),t=await e.json();r(t.body),d="Elite"===o?t.body[a].leaderboard_elite_players_1.slice(0,-1)+"4":t.body[a].leaderboard_standard_players_1.slice(0,-1)+"4"}else if("CtTeam"===e){const e=await fetch(n),t=await e.json();r(t.body),d=t.body[a].leaderboard_team}else{const e=await fetch(n),t=await e.json();r(t.body),console.log(t),d=t.body[a].leaderboard_player}const m=await fetch(d+"?page="+t,i),h=await m.json();if(!h.success)throw new Error("Unsuccessful: "+h.error);console.log(l);for(let e=1;e<l;e++){const a=await fetch(d+"?page="+(t+e),i);if(!a.ok)throw new Error("Failed to fetch data");const s=await a.json();h.body=h.body.concat(s.body),console.log("got page: ",e)}if("Boss2"===e||"Boss3"===e||"Boss4"===e){let a=0;switch(e){case"Boss2":a=1;break;case"Boss3":a=2;break;case"Boss4":a=3}const t=[],s=[];for(let e=0;e<h.body.length;e++){const o=[],l=e;for(let n=l+1;n<=l+a&&!(n>=h.body.length);n++)h.body[e].scoreParts[0].score===h.body[n].scoreParts[0].score&&(o.push({displayName:h.body[n].displayName,profile:h.body[n].profile}),s.push(n),e++),t.push(o),h.body[l].otherPlayers=o}s.reverse().map((e=>{h.body.splice(e,1)}))}c(h)}catch(h){b(!0),console.log(h)}finally{m(!1)}})()}),[e,a,t,o]),{data:n,events:i,loading:d,error:h}}},1802:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var s=t(6229),o=t(5043);var l=t(7080),n=t(8424),c=t(4409),i=t(3204),r=t(642),d=t(579);const m=()=>{var e,a,t,m,h;const[b,p]=(0,o.useState)(0),{data:x,loading:g}=(0,n.g)(),[u,y]=(0,o.useState)(x.length-1),{data:j,loading:f}=(0,l.j)(u),{data:v,loading:w}=(e=>{const a="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/daily_powers.json",[t,s]=(0,o.useState)([]),[l,n]=(0,o.useState)(!0);return(0,o.useMemo)((()=>{(async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();s(t),console.log(t)}catch(I){console.log(I)}finally{n(!1)}})()}),[e]),{data:t,loading:l}})(u),[N,_]=(0,o.useState)([]),k=()=>({name:"",globalPosition:-1,truce:!1,isAyo:!1}),[E,S]=(0,o.useState)({teams:Array.from({length:6},k)}),[B,C]=(0,o.useState)(-1),[P,F]=(0,o.useState)(1),{data:T,events:A,loading:M,error:I}=(0,c.P)("CtTeam",x.length-u,P,void 0,4),R=M||f||w||g,L=I,O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const a={teams:[]},t=e>=0?N[e]:E;console.log(t);const s=[...N];t.teams.map(((e,t)=>{const s=document.getElementById("team-".concat(t,"-name")),o=document.getElementById("team-".concat(t,"-ayo")),l=document.getElementById("team-".concat(t,"-truce")),n=T.body.findIndex((e=>e.displayName===s.value.toUpperCase()));a.teams.push({name:s.value,globalPosition:n,truce:l.checked,isAyo:o.checked})})),console.log(a),s[e]=a,_([...s]),S(a)},D=e=>e>=1&&e<=3?e:e>3&&e<=25?25:e>25&&e<=100?100:-1;return(0,d.jsxs)("div",{className:"flex flex-col items-center align-center justify-center",children:[(0,d.jsx)("p",{className:"font-bold text-2xl py-2 font-display tracking-tighter text-accent",children:"Playground"}),(0,d.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,d.jsx)("label",{className:"input input-bordered flex items-center gap-2",children:(0,d.jsx)("input",{className:"font-medium text-lg max-w-40",type:"text",inputMode:"numeric",placeholder:"roundEven5 Playground",onChange:e=>{p(Number(e.target.value))}})}),(0,d.jsxs)("p",{id:"roundEven5-result",children:[(0,r.QC)(.85*b)," (",.85*b,")"]})]}),(0,d.jsx)("div",{className:"divider"}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 py-2 w-full",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("p",{className:"text-nowrap",children:"Select a CT event:"}),(0,d.jsx)("select",{id:"ct-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{console.log(e.target.options.selectedIndex)},value:u,children:x.filter((e=>A.some((a=>a.id===e.id)))).map((e=>(0,d.jsxs)("option",{value:e.number,onClick:()=>y(e.number),children:[e.number," (",e.id,")"]},e.number)))})]}),(0,d.jsx)("p",{children:"Click the text you want to copy."}),(0,d.jsx)("div",{className:"divider"}),R?(0,d.jsx)(s.R,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsxs)("label",{children:["Forum Post Title:",(0,d.jsx)("textarea",{readOnly:!0,className:"textarea textarea-bordered w-full",value:"Event ".concat(u," (").concat((0,r.R$)(null===(e=A[x.length-u])||void 0===e?void 0:e.start),"-").concat((0,r.R$)(null===(a=A[x.length-u])||void 0===a?void 0:a.end),")").split("\n").map((e=>e.trim())).join("\n")})]})}),(0,d.jsx)("div",{className:"divider"}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsxs)("label",{children:["Initial Event Highlight Message:",(0,d.jsx)("textarea",{readOnly:!0,className:"textarea textarea-bordered w-full min-h-96",value:"## Event ID: `".concat(null===(t=A[x.length-u])||void 0===t?void 0:t.id,"`\n\n                ## Event Timeline:\n                <t:").concat((null===(m=A[x.length-u])||void 0===m?void 0:m.start)/1e3,"> - <t:").concat((null===(h=A[x.length-u])||void 0===h?void 0:h.end)/1e3,">\n                \n                ### Event Relics:\n                ").concat(j.map((e=>"- ".concat((0,r.iS)(e)," ").concat((0,r.le)(e)))).join("\n"),"\n                  \n                ### Daily Relics:\n                ").concat(v.map((e=>"- ".concat((0,r.iS)(e)," ").concat((0,r.le)(e)))).join("\n")).split("\n").map((e=>e.trim())).join("\n")})]})}),(0,d.jsx)("div",{className:"divider"}),L?(0,d.jsxs)(d.Fragment,{children:["Failed to load data. ",I]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"btn",onClick:()=>document.getElementById("local-battle-modal").showModal(),children:"Manage Local Battles"}),(0,d.jsxs)("dialog",{id:"local-battle-modal",className:"modal",children:[(0,d.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,d.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Add Local Battle"}),(0,d.jsx)("p",{children:"Add a local battle that appeared this week."}),(0,d.jsx)("p",{className:"py-4",children:"This tool will attempt to find the team's name in the top 100 global leaderboard when you create the local battle. For it to do that, enter it as it appears in-game. Not case sensitive."}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,d.jsx)("div",{className:"flex gap-2",children:N.map(((e,a)=>(0,d.jsx)("div",{className:"border rounded-lg p-4 hover:bg-black/25 hover:cursor-pointer"+(B===a?" border-success":" border-transparent"),onClick:()=>{console.log(a),console.log(B),C(a===B?-1:a)},children:e.teams.filter((e=>e.name)).map(((e,a)=>(0,d.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.F$)(a+1),e.isAyo?(0,d.jsx)(i.Ny1,{}):(0,d.jsx)(d.Fragment,{}),e.globalPosition+1<=100&&e.globalPosition>0?"GT".concat(D(e.globalPosition+1)):""," ",e.name,e.truce?(0,d.jsx)(i.DDN,{}):(0,d.jsx)(d.Fragment,{})]})))})))}),(B>=0?N[B]:E).teams.map(((e,a)=>(0,d.jsxs)("div",{className:"w-2/3 flex flex-col items-center gap-1",children:[(0,d.jsxs)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:[(0,d.jsx)("img",{src:(0,r.RO)(a+1),className:"w-[24px]"}),(0,d.jsx)("img",{src:(0,r.YG)(e.globalPosition+1,A[x.length-u].totalScores),className:"w-[24px]"}),(0,d.jsx)("input",{className:"font-semibold w-full",type:"text",placeholder:"Team Name",value:e.name,id:"team-"+a+"-name",onChange:e=>{O(B)}})]}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("label",{className:"flex gap-4 cursor-pointer items-center",children:[(0,d.jsx)("input",{type:"checkbox",className:"checkbox",checked:e.truce,id:"team-"+a+"-truce",onChange:e=>{O(B)}}),(0,d.jsx)("span",{className:"label-text",children:"Truce"})]}),(0,d.jsxs)("label",{className:"flex gap-4 cursor-pointer items-center",children:[(0,d.jsx)("input",{type:"checkbox",className:"checkbox",id:"team-"+a+"-ayo",checked:e.isAyo,onChange:e=>{O(B)}}),(0,d.jsx)("span",{className:"label-text",children:"\ud83d\udc40"})]})]})]}))),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{className:"btn btn-success",disabled:B>=0,onClick:()=>{(()=>{const e=[...N];E.teams.filter((e=>e.name)).length<=1||e.includes(E)||(e.push(E),console.log(e),_(e),S({teams:Array.from({length:6},k)}))})()},children:"Add Battle"}),(0,d.jsx)("button",{className:"btn btn-error",disabled:B<0,onClick:()=>{(e=>{const a=[...N];a.splice(e,1),console.log(a),console.log(N),C(-1),_(a)})(B)},children:"Delete Battle"})]})]}),(0,d.jsx)("div",{className:"modal-action",children:(0,d.jsx)("form",{method:"dialog",children:(0,d.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,d.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,d.jsx)("button",{children:"close"})})]}),(0,d.jsx)("div",{className:"w-3/4",children:(0,d.jsxs)("label",{children:["Leaderboard, Battles, and Other Events:",(0,d.jsx)("textarea",{readOnly:!0,className:"textarea textarea-bordered w-full min-h-96",value:"# Event Leaderboard:\n                      ".concat(T.body.slice(0,3).map(((e,a)=>"".concat((0,r.y9)(a+1,A[x.length-u].totalScores)," **").concat(e.displayName,"** | :CTPoints: `").concat(e.score,"` ").concat(T.body[0].score-e.score>0?"(:small_red_triangle_down: `".concat(T.body[0].score-e.score,"`)"):""))).join("\n"),"\n                        \n                        # Local Battles:\n                        ").concat(N.map(((e,a)=>e.teams.filter((e=>e.name)).map(((e,a)=>"".concat(a<=3?":LT".concat(a+1,":"):":x:").concat(e.isAyo?":eyes:":"").concat(e.globalPosition+1<=100&&e.globalPosition>0?":GT".concat(D(e.globalPosition+1),":"):""," ").concat(0===a?"**":"").concat(e.name).concat(0===a?"**":"").concat(e.truce?" :handshake:":""))).join("\n"))).join("\n\n"),"\n\n                        # Other Events:").split("\n").map((e=>e.trim())).join("\n")})]})})]})]})]}),(0,d.jsx)("div",{className:"divider"})]})}}}]);
//# sourceMappingURL=802.f161f005.chunk.js.map