"use strict";(self.webpackChunkoatsfx_btd6_tool=self.webpackChunkoatsfx_btd6_tool||[]).push([[802],{1589:(e,a,t)=>{t.d(a,{A:()=>o});const o=[{id:"m6h1l4xd",number:65},{id:"m5k2an8p",number:64},{id:"m4q6vtme",number:63},{id:"m4q6ddt7",number:62},{id:"m4adofkk",number:61},{id:"m3rvyepv",number:60},{id:"m34yd7qs",number:59},{id:"m2kwlt60",number:58},{id:"m22b3l2q",number:57},{id:"m18f2i05",number:56},{id:"m0n34q7z",number:55},{id:"m05t53n4",number:54},{id:"lzt9vnfv",number:53},{id:"lywiirac",number:52},{id:"lygltxgu",number:51},{id:"lxo2ds1k",number:50},{id:"lx9ho5f2",number:49},{id:"lwsgoq2e",number:48},{id:"lw3zptqw",number:47},{id:"lvk1it2j",number:46},{id:"luub1xz5",number:45},{id:"lug12fgd",number:44},{id:"lts2aqan",number:43},{id:"ltkys2el",number:42},{id:"lswkbyus",number:41},{id:"ls2jg6ct",number:40},{id:"lrlbwtxn",number:39},{id:"lr3uz1d8",number:38},{id:"lqa43ghl",number:37},{id:"lq63jr4t",number:36},{id:"lphkfmue",number:35},{id:"lorujl6k",number:34},{id:"lo3dbb57",number:33},{id:"lncmwv1g",number:32},{id:"lndqbo35",number:31},{id:"lmpnzhq6",number:30},{id:"lm77zack",number:29},{id:"lleh5fpm",number:28},{id:"ll1f7vl8",number:27},{id:"lkj6emus",number:26},{id:"ljxai1s8",number:25},{id:"ljetrjjf",number:24},{id:"lisaoa37",number:23},{id:"lhzbbljg",number:22},{id:"lhgt6hxj",number:21},{id:"lgzmgxif",number:20},{id:"lgli8qmt",number:19},{id:"lg1ioh3o",number:18},{id:"lfbp5rsx",number:17},{id:"lenh39dp",number:16},{id:"ledh1q44",number:15},{id:"ldkqe7g6",number:14},{id:"ld2c7egr",number:13},{id:"lcjmdijk",number:12},{id:"lbn286o5",number:11},{id:"lbei2nd1",number:10},{id:"lau3vdb5",number:9},{id:"labw9mm1",number:8},{id:"l9qakvod",number:7},{id:"l9dkq0ma",number:6},{id:"l8t9h7wa",number:5},{id:"l884uw8u",number:4},{id:"l7i90j39",number:3},{id:"l76rtr72",number:2},{id:"l6efnna0",number:1}]},4699:(e,a,t)=>{t.d(a,{f:()=>n});var o=t(5043);const n=e=>{const a="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/tiles.json",[t,n]=(0,o.useState)({}),[s,l]=(0,o.useState)(!0);return(0,o.useMemo)((()=>{(async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();n(t),console.log(t)}catch(e){console.log(e)}finally{l(!1)}})()}),[e]),{data:t,loading:s}}},7080:(e,a,t)=>{t.d(a,{j:()=>n});var o=t(5043);const n=e=>{const a="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/event_relics.json",[t,n]=(0,o.useState)([]),[s,l]=(0,o.useState)(!0);return(0,o.useMemo)((()=>{(async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();n(t),console.log(t)}catch(e){console.log(e)}finally{l(!1)}})()}),[e]),{data:t,loading:s}}},4409:(e,a,t)=>{t.d(a,{P:()=>n});var o=t(5043);const n=function(e,a,t,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const[l,r]=(0,o.useState)({}),[i,c]=(0,o.useState)([]),[d,m]=(0,o.useState)(!0),[u,b]=(0,o.useState)(!1);return(0,o.useMemo)((()=>{const o="https://data.ninjakiwi.com/btd6/bosses/",l="https://data.ninjakiwi.com/btd6/ct/",i={mode:"cors"};(async()=>{m(!0),b(!1),console.log("fetching leaderboards");try{let d="";if("Race"===e){const e=await fetch("https://data.ninjakiwi.com/btd6/races/"),t=await e.json();c(t.body),d=t.body[a].leaderboard}else if("Boss"===e){const e=await fetch(o),t=await e.json();c(t.body),d="Elite"===n?t.body[a].leaderboard_elite_players_1:t.body[a].leaderboard_standard_players_1}else if("Boss2"===e){const e=await fetch(o),t=await e.json();c(t.body),d="Elite"===n?t.body[a].leaderboard_elite_players_1.slice(0,-1)+"2":t.body[a].leaderboard_standard_players_1.slice(0,-1)+"2"}else if("Boss3"===e){const e=await fetch(o),t=await e.json();c(t.body),d="Elite"===n?t.body[a].leaderboard_elite_players_1.slice(0,-1)+"3":t.body[a].leaderboard_standard_players_1.slice(0,-1)+"3"}else if("Boss4"===e){const e=await fetch(o),t=await e.json();c(t.body),d="Elite"===n?t.body[a].leaderboard_elite_players_1.slice(0,-1)+"4":t.body[a].leaderboard_standard_players_1.slice(0,-1)+"4"}else if("CtTeam"===e){const e=await fetch(l),t=await e.json();c(t.body),d=t.body[a].leaderboard_team}else{const e=await fetch(l),t=await e.json();c(t.body),console.log(t),d=t.body[a].leaderboard_player}const m=await fetch(d+"?page="+t,i),u=await m.json();if(!u.success)throw new Error("Unsuccessful: "+u.error);console.log(s);for(let e=1;e<s;e++){const a=await fetch(d+"?page="+(t+e),i);if(!a.ok)throw new Error("Failed to fetch data");const o=await a.json();u.body=u.body.concat(o.body),console.log("got page: ",e)}if("Boss2"===e||"Boss3"===e||"Boss4"===e){let a=0;switch(e){case"Boss2":a=1;break;case"Boss3":a=2;break;case"Boss4":a=3}const t=[],o=[];for(let e=0;e<u.body.length;e++){const n=[],s=e;for(let l=s+1;l<=s+a&&!(l>=u.body.length);l++)u.body[e].scoreParts[0].score===u.body[l].scoreParts[0].score&&(n.push({displayName:u.body[l].displayName,profile:u.body[l].profile}),o.push(l),e++),t.push(n),u.body[s].otherPlayers=n}o.reverse().map((e=>{u.body.splice(e,1)}))}r(u)}catch(u){b(!0),console.log(u)}finally{m(!1)}})()}),[e,a,t,n]),{data:l,events:i,loading:d,error:u}}},1802:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var o=t(6229),n=t(1589),s=t(5043);var l=t(4699),r=t(7080),i=t(4409),c=t(3204),d=t(642),m=t(579);const u=()=>{const[e,a]=(0,s.useState)(0),[t,u]=(0,s.useState)(n.A[0].number),{data:b,loading:h}=(0,l.f)(t),{data:g,loading:p}=(0,r.j)(t),{data:y,loading:x}=(e=>{const a="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/daily_powers.json",[t,o]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0);return(0,s.useMemo)((()=>{(async()=>{try{const e=await fetch(a);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();o(t),console.log(t)}catch(E){console.log(E)}finally{l(!1)}})()}),[e]),{data:t,loading:n}})(t),[f,j]=(0,s.useState)([]),v=()=>({name:"",globalPosition:-1,truce:!1,isAyo:!1}),[w,k]=(0,s.useState)({teams:Array.from({length:6},v)}),[_,N]=(0,s.useState)(-1),[S,B]=(0,s.useState)(1),{data:C,events:M,loading:A,error:E}=(0,i.P)("CtTeam",n.A.length-t,S,void 0,4),T=A||h||p||x,P=E,R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const a={teams:[]},t=e>=0?f[e]:w;console.log(t);const o=[...f];t.teams.map(((e,t)=>{const o=document.getElementById("team-".concat(t,"-name")),n=document.getElementById("team-".concat(t,"-ayo")),s=document.getElementById("team-".concat(t,"-truce")),l=C.body.findIndex((e=>e.displayName===o.value.toUpperCase()));a.teams.push({name:o.value,globalPosition:l,truce:s.checked,isAyo:n.checked})})),console.log(a),o[e]=a,j([...o]),k(a)},D=e=>e>=1&&e<=3?e:e>3&&e<=25?25:e>25&&e<=100?100:-1;return(0,m.jsxs)("div",{className:"flex flex-col items-center align-center justify-center",children:[(0,m.jsx)("p",{className:"font-bold text-2xl py-2 font-display tracking-tighter text-accent",children:"Playground"}),(0,m.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,m.jsx)("label",{className:"input input-bordered flex items-center gap-2",children:(0,m.jsx)("input",{className:"font-medium text-lg max-w-40",type:"text",inputMode:"numeric",placeholder:"roundEven5 Playground",onChange:e=>{a(Number(e.target.value))}})}),(0,m.jsxs)("p",{id:"roundEven5-result",children:[(0,d.QC)(.85*e)," (",.85*e,")"]})]}),(0,m.jsx)("div",{className:"divider"}),(0,m.jsxs)("div",{className:"flex flex-col items-center gap-4 py-2 w-full",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsx)("p",{className:"text-nowrap",children:"Select a CT event:"}),(0,m.jsx)("select",{id:"ct-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{console.log(e.target.options.selectedIndex)},value:t,children:n.A.filter((e=>M.some((a=>a.id===e.id)))).map((e=>(0,m.jsxs)("option",{value:e.number,onClick:()=>u(e.number),children:[e.number," (",e.id,")"]},e.number)))})]}),(0,m.jsx)("p",{children:"Click the text you want to copy."}),(0,m.jsx)("div",{className:"divider"}),T?(0,m.jsx)(o.R,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"w-3/4",children:(0,m.jsxs)("label",{children:["Forum Post Title:",(0,m.jsx)("textarea",{readOnly:!0,className:"textarea textarea-bordered w-full",value:"Event ".concat(t," (").concat((0,d.R$)(M[n.A.length-t].start),"-").concat((0,d.R$)(M[n.A.length-t].end),")").split("\n").map((e=>e.trim())).join("\n")})]})}),(0,m.jsx)("div",{className:"divider"}),(0,m.jsx)("div",{className:"w-3/4",children:(0,m.jsxs)("label",{children:["Initial Event Highlight Message:",(0,m.jsx)("textarea",{readOnly:!0,className:"textarea textarea-bordered w-full min-h-96",value:"## Event ID: `".concat(M[n.A.length-t].id,"`\n\n                ## Event Timeline:\n                <t:").concat(M[n.A.length-t].start/1e3,"> - <t:").concat(M[n.A.length-t].end/1e3,">\n                \n                ### Event Relics:\n                ").concat(g.map((e=>"- ".concat((0,d.iS)(e)," ").concat((0,d.le)(e)))).join("\n"),"\n                  \n                ### Daily Relics:\n                ").concat(y.map((e=>"- ".concat((0,d.iS)(e)," ").concat((0,d.le)(e)))).join("\n")).split("\n").map((e=>e.trim())).join("\n")})]})}),(0,m.jsx)("div",{className:"divider"}),P?(0,m.jsxs)(m.Fragment,{children:["Failed to load data. ",E]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{className:"btn",onClick:()=>document.getElementById("local-battle-modal").showModal(),children:"Manage Local Battles"}),(0,m.jsxs)("dialog",{id:"local-battle-modal",className:"modal",children:[(0,m.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,m.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Add Local Battle"}),(0,m.jsx)("p",{children:"Add a local battle that appeared this week."}),(0,m.jsx)("p",{className:"py-4",children:"This tool will attempt to find the team's name in the top 100 global leaderboard when you create the local battle. For it to do that, enter it as it appears in-game. Not case sensitive."}),(0,m.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,m.jsx)("div",{className:"flex gap-2",children:f.map(((e,a)=>(0,m.jsx)("div",{className:"border rounded-lg p-4 hover:bg-black/25 hover:cursor-pointer"+(_===a?" border-success":" border-transparent"),onClick:()=>{console.log(a),console.log(_),N(a===_?-1:a)},children:e.teams.filter((e=>e.name)).map(((e,a)=>(0,m.jsxs)("p",{className:"flex items-center gap-1",children:[(0,d.F$)(a+1),e.isAyo?(0,m.jsx)(c.Ny1,{}):(0,m.jsx)(m.Fragment,{}),e.globalPosition+1<=100&&e.globalPosition>0?"GT".concat(D(e.globalPosition+1)):""," ",e.name,e.truce?(0,m.jsx)(c.DDN,{}):(0,m.jsx)(m.Fragment,{})]})))})))}),(_>=0?f[_]:w).teams.map(((e,a)=>(0,m.jsxs)("div",{className:"w-2/3 flex flex-col items-center gap-1",children:[(0,m.jsxs)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:[(0,m.jsx)("img",{src:(0,d.RO)(a+1),className:"w-[24px]"}),(0,m.jsx)("img",{src:(0,d.YG)(e.globalPosition+1,M[n.A.length-t].totalScores),className:"w-[24px]"}),(0,m.jsx)("input",{className:"font-semibold w-full",type:"text",placeholder:"Team Name",value:e.name,id:"team-"+a+"-name",onChange:e=>{R(_)}})]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("label",{className:"flex gap-4 cursor-pointer items-center",children:[(0,m.jsx)("input",{type:"checkbox",className:"checkbox",checked:e.truce,id:"team-"+a+"-truce",onChange:e=>{R(_)}}),(0,m.jsx)("span",{className:"label-text",children:"Truce"})]}),(0,m.jsxs)("label",{className:"flex gap-4 cursor-pointer items-center",children:[(0,m.jsx)("input",{type:"checkbox",className:"checkbox",id:"team-"+a+"-ayo",checked:e.isAyo,onChange:e=>{R(_)}}),(0,m.jsx)("span",{className:"label-text",children:"\ud83d\udc40"})]})]})]}))),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("button",{className:"btn btn-success",disabled:_>=0,onClick:()=>{(()=>{const e=[...f];w.teams.filter((e=>e.name)).length<=1||e.includes(w)||(e.push(w),console.log(e),j(e),k({teams:Array.from({length:6},v)}))})()},children:"Add Battle"}),(0,m.jsx)("button",{className:"btn btn-error",disabled:_<0,onClick:()=>{(e=>{const a=[...f];a.splice(e,1),console.log(a),console.log(f),N(-1),j(a)})(_)},children:"Delete Battle"})]})]}),(0,m.jsx)("div",{className:"modal-action",children:(0,m.jsx)("form",{method:"dialog",children:(0,m.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,m.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,m.jsx)("button",{children:"close"})})]}),(0,m.jsx)("div",{className:"w-3/4",children:(0,m.jsxs)("label",{children:["Leaderboard, Battles, and Other Events:",(0,m.jsx)("textarea",{readOnly:!0,className:"textarea textarea-bordered w-full min-h-96",value:"# Event Leaderboard:\n                      ".concat(C.body.slice(0,3).map(((e,a)=>"".concat((0,d.y9)(a+1,M[n.A.length-t].totalScores)," **").concat(e.displayName,"** | :CTPoints: `").concat(e.score,"` ").concat(C.body[0].score-e.score>0?"(:small_red_triangle_down: `".concat(C.body[0].score-e.score,"`)"):""))).join("\n"),"\n                        \n                        # Local Battles:\n                        ").concat(f.map(((e,a)=>e.teams.filter((e=>e.name)).map(((e,a)=>"".concat(a<=3?":LT".concat(a+1,":"):":x:").concat(e.isAyo?":eyes:":"").concat(e.globalPosition+1<=100&&e.globalPosition>0?":GT".concat(D(e.globalPosition+1),":"):""," ").concat(0===a?"**":"").concat(e.name).concat(0===a?"**":"").concat(e.truce?" :handshake:":""))).join("\n"))).join("\n\n"),"\n\n                        # Other Events:").split("\n").map((e=>e.trim())).join("\n")})]})})]})]})]}),(0,m.jsx)("div",{className:"divider"})]})}},642:(e,a,t)=>{t.d(a,{Ei:()=>u,F$:()=>y,HK:()=>j,QC:()=>n,R$:()=>f,RO:()=>p,Us:()=>b,YG:()=>h,YY:()=>x,be:()=>d,fF:()=>l,fh:()=>c,iS:()=>r,le:()=>i,u3:()=>m,vp:()=>v,xX:()=>s,y9:()=>g});var o=t(422);const n=e=>e%5===2.5?5*Math.floor(e/5):5*Math.round(e/5),s=e=>{const a=Math.floor(e/36e5),t=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3),n=Math.floor(e%1e3/10),s=a>0?a.toString().padStart(2,"0"):"",l=t.toString().padStart(2,"0"),r=o.toString().padStart(2,"0"),i=n.toString().padStart(2,"0");return s?"".concat(s,":").concat(l,":").concat(r,".").concat(i):"".concat(l,":").concat(r,".").concat(i)},l=e=>{const a=Date.now()-e,t=6e4,o=36e5,n=864e5;if(a<t){const e=Math.floor(a/1e3);return"".concat(e," second").concat(1!==e?"s":""," ago")}if(a<o){const e=Math.floor(a/t);return"".concat(e," minute").concat(1!==e?"s":""," ago")}if(a<n){const e=Math.floor(a/o);return"".concat(e," hour").concat(1!==e?"s":""," ago")}{const e=Math.floor(a/n);return"".concat(e," day").concat(1!==e?"s":""," ago")}},r=e=>e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b(Or|The|A|Of)\b/g,(e=>e.toLowerCase())),i=e=>":z_".concat(e,":"),c=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),d=(e,a)=>{if(e<1)return"";const t=e/a*100;return 1===e?o.R8.black_diamond:2===e?o.R8.red_diamond:3===e?o.R8.diamond:e<=50?o.R8.gold_diamond:t<=1?o.R8.double_gold:t<=10?o.R8.gold_silver:t<=25?o.R8.double_silver:t<=50?o.R8.silver:t<=75?o.R8.bronze:""},m=(e,a)=>{if(e<1)return"";const t=e/a*100;return 1===e?o.oD.black_diamond:2===e?o.oD.red_diamond:3===e?o.oD.diamond:e<=50?o.oD.gold_diamond:t<=1?o.oD.double_gold:t<=10?o.oD.gold_silver:t<=25?o.oD.double_silver:t<=50?o.oD.silver:t<=75?o.oD.bronze:""},u=(e,a)=>{if(e<1)return"";const t=e/a*100;return 1===e?o.o9.black_diamond:2===e?o.o9.red_diamond:3===e?o.o9.diamond:e<=50?o.o9.gold_diamond:t<=1?o.o9.double_gold:t<=10?o.o9.gold_silver:t<=25?o.o9.double_silver:t<=50?o.o9.silver:t<=75?o.o9.bronze:""},b=(e,a)=>{if(e<1)return"";const t=e/a*100;return e<=25?o.Ks.diamond:e<=100?o.Ks.gold_diamond:t<=1?o.Ks.double_gold:t<=10?o.Ks.gold_silver:t<=25?o.Ks.double_silver:t<=50?o.Ks.silver:t<=75?o.Ks.bronze:""},h=(e,a)=>{if(e<1)return"";const t=e/a*100;return 1===e?o.oh.black_diamond:2===e?o.oh.red_diamond:3===e?o.oh.diamond:e<=25?o.oh.gold_diamond:e<=100?o.oh.double_gold:t<=1?o.oh.gold_silver:t<=10?o.oh.double_silver:t<=25?o.oh.silver:t<=75?o.oh.bronze:""},g=(e,a)=>1===e?":GT1:":2===e?":GT2:":3===e?":GT3:":e<=25?":GT25":e<=100?":GT100:":"",p=e=>{switch(e){case 1:return o.dd.diamond;case 2:return o.dd.double_gold;case 3:return o.dd.silver;case 4:return o.dd.bronze;default:return""}},y=e=>{const a=e%10,t=e%100;return 1===a&&11!==t?e+"st":2===a&&12!==t?e+"nd":3===a&&13!==t?e+"rd":e+"th"},x=e=>{switch(e){case 2:return"Race";case 4:return"Boss";case 8:return"LeastCash";case 9:return"LeastTiers";default:return""}},f=e=>{const a=new Date(e),t=a.getUTCDate(),o=a.toLocaleString("en-US",{month:"long",timeZone:"UTC"}),n=a.getUTCFullYear();return"".concat(y(t)," ").concat(o," ").concat(n)},j={Alchemist:"magic",BananaFarm:"support",BeastHandler:"support",BoomerangMonkey:"primary",BombShooter:"primary",DartMonkey:"primary",DartlingGunner:"military",Druid:"magic",EngineerMonkey:"support",GlueGunner:"primary",HeliPilot:"military",IceMonkey:"primary",Mermonkey:"magic",MonkeyAce:"military",MonkeyBuccaneer:"military",MonkeySub:"military",MonkeyVillage:"support",MortarMonkey:"military",NinjaMonkey:"magic",SniperMonkey:"military",SpikeFactory:"support",SuperMonkey:"magic",TackShooter:"primary",WizardMonkey:"magic",AdmiralBrickell:"hero",Adora:"hero",Benjamin:"hero",CaptainChurchill:"hero",Corvus:"hero",Etienne:"hero",Ezili:"hero",Geraldo:"hero",Gwendolin:"hero",ObynGreenfoot:"hero",PatFusty:"hero",Psi:"hero",Quincy:"hero",Rosalia:"hero",Sauda:"hero",StrikerJones:"hero",ChosenPrimaryHero:"hero"},v={Race:"Race",Boss:"Boss",Boss2:"Boss",Boss3:"Boss",Boss4:"Boss",CtPlayer:"Contested Territory",CtTeam:"Contested Territory"}}}]);
//# sourceMappingURL=802.453d5170.chunk.js.map