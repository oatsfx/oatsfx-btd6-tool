"use strict";(self.webpackChunkoatsfx_btd6_tool=self.webpackChunkoatsfx_btd6_tool||[]).push([[722],{9358:(e,s,l)=>{l.d(s,{A:()=>x});var t=l(9373);const a=l.p+"static/media/selling_disabled.b93aa85cb5afbb0dff98.webp",i=l.p+"static/media/monkey_knowledge_disabled.b3f9bea9fde617f36ea8.webp";var n=l(1421),o=l(642),r=l(579);const c=e=>{var s;let{tileCode:l,tile:c}=e;return(0,r.jsxs)("div",{className:"indicator w-full flex flex-col outline outline-1 outline-white/50 rounded-xl items-center my-8 py-4 pb-6 bg-no-repeat bg-top bg-cover bg-clip-border "+t.Di[c.GameData.selectedMap],children:[(0,r.jsxs)("div",{className:"indicator-item indicator-top indicator-center badge badge-ghost font-semibold gap-1 px-5 py-3 outline outline-1 outline-white/25",children:[(0,r.jsx)("img",{src:t.pi[c.GameData.subGameType],className:"w-[16px]"}),(0,o.iS)((0,o.YY)(c.GameData.subGameType))]}),(0,r.jsx)("p",{className:"font-bold text-2xl text-center",children:l}),(0,r.jsxs)("p",{className:"font-medium text-md text-center",children:[(0,o.iS)(c.GameData.selectedMap)," //"," ",(0,o.iS)(c.GameData.selectedDifficulty)]}),(0,r.jsxs)("p",{className:"text-md text-center",children:["$".concat(null===(s=c.GameData.dcModel.startRules.cash)||void 0===s?void 0:s.toLocaleString()," // ")," ","Round ".concat(c.GameData.dcModel.startRules.round,"-").concat(c.GameData.dcModel.startRules.endRound)]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 justify-center items-center",children:[c.GameData.dcModel.disableSelling?(0,r.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":"Selling Disabled",children:(0,r.jsx)("img",{src:a,className:"w-[34px]"})}):(0,r.jsx)(r.Fragment,{}),c.GameData.dcModel.disableMK?(0,r.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":"Monkey Knowledge Disabled",children:(0,r.jsx)("img",{src:i,className:"w-[34px]"})}):(0,r.jsx)(r.Fragment,{}),"Relic"===c.TileType?(0,r.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":(0,o.iS)(c.RelicType),children:(0,r.jsx)("img",{src:t.Gh[c.RelicType],className:"w-[34px]"})}):(0,r.jsx)("div",{className:"tooltip indicator before:z-50","data-tip":(0,o.iS)(c.TileType),children:(0,r.jsx)("img",{src:t.fO[c.TileType],className:"w-[34px]"})})]}),c.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"divider px-4",children:c.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length>c.GameData.dcModel.towers._items.filter((e=>e.isHero)).length/2?"Heroes Excluded":"Heroes"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 gap-y-3 justify-center",children:c.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).length>c.GameData.dcModel.towers._items.filter((e=>e.isHero)).length/2?c.GameData.dcModel.towers._items.filter((e=>e.isHero&&0===e.max&&"ChosenPrimaryHero"!==e.tower)).map((e=>(0,r.jsx)(n.w,{name:e.tower,image:t.yc[e.tower]},e.tower))):c.GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).map((e=>(0,r.jsx)(n.w,{name:e.tower,image:t.yc[e.tower]},e.tower)))})]}):null,(0,r.jsx)("div",{className:"divider px-4",children:"Towers"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 gap-y-3 justify-center",children:c.GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)).map((e=>(0,r.jsx)(n.w,{name:e.tower,image:t.yc[e.tower],indicator:e.max>0?e.max:"\u221e"},e.tower)))})]})};var d=l(5043),m=l(5393),u=l(7294),h=l(2905);const x=e=>{let{data:s,loading:l,selectedTile:a,gameType:i,changeTile:n}=e;const[x,p]=(0,d.useState)("All"),[f,g]=(0,d.useState)({}),b=e=>{p(e.target.value)};return(0,d.useEffect)((()=>{const e=Object.keys(s).sort().reduce(((e,l)=>(s[l].GameData.subGameType!==o.Zm[i]||"All"!==x&&s[l].TileType!==x||(e[l]=s[l]),e)),{});Object.keys(e).includes(a)||""===a||n(Object.keys(e).at(0)),g(e)}),[x,s]),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"w-full justify-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium text-center",children:"Select a Tile"}),l?(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full py-2 items-center",children:[(0,r.jsx)("div",{className:"skeleton h-12 w-full"}),(0,r.jsx)("div",{className:"skeleton h-3 w-full"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,r.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,r.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,r.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,r.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"}),(0,r.jsx)("div",{className:"skeleton w-8 h-8 rounded-full shrink-0"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-4 py-1 justify-center",children:[(0,r.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"radio-1",value:"Banner",className:"radio",checked:"Banner"===x,onChange:b}),(0,r.jsx)("img",{className:"w-[28px] py-2",src:m})]}),(0,r.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"radio-1",value:"Relic",className:"radio",checked:"Relic"===x,onChange:b}),(0,r.jsx)("img",{className:"w-[28px] py-2",src:u})]}),(0,r.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"radio-1",value:"Regular",className:"radio",checked:"Regular"===x||"TeamFirstCapture"===x,onChange:b}),(0,r.jsx)("img",{className:"w-[28px] py-2",src:h})]}),(0,r.jsxs)("label",{className:"label flex-col cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"radio-1",value:"All",className:"radio",checked:"All"===x,onChange:b}),(0,r.jsx)("p",{className:"text-sm py-3",children:"All"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,r.jsxs)("select",{id:"tile-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{const s=e.target.value;n(s)},defaultValue:"Select a tile",children:[(0,r.jsx)("option",{disabled:!0,children:"Select a tile"}),Object.entries(f).map((e=>(0,r.jsx)("option",{id:e[0],children:e[0]},e[0])))]}),(0,r.jsxs)("details",{className:"dropdown dropdown-right dropdown-center",children:[(0,r.jsx)("summary",{className:"btn w-24",children:"Quick Relic"}),(0,r.jsx)("ul",{className:"p-2 shadow-xl menu dropdown-content z-[1] bg-base-100 rounded-box w-52 outline outline-white/25 outline-1",children:Object.entries(s).map((e=>"Relic"===e[1].TileType&&e[1].GameData.subGameType===o.Zm[i]?(0,r.jsx)("li",{children:(0,r.jsxs)("a",{id:e[0],onClick:s=>{((e,s)=>{p("Relic"),n(s),document.getElementById("tile-select").value=e.target.id})(s,e[0])},children:[(0,r.jsx)("img",{className:"w-[20px]",src:t.Gh[e[1].RelicType]}),(0,o.iS)(e[1].RelicType)]})},e[1].RelicType):null))})]})]}),a?(0,r.jsx)(c,{tileCode:a,tile:s[a]}):(0,r.jsx)("p",{className:"text-center",children:"No tile selected."})]})]})})}},1421:(e,s,l)=>{l.d(s,{w:()=>n});var t=l(642),a=l(8817),i=l(579);const n=e=>{let{name:s,image:l,indicator:n,boxOfMonkey:o}=e;return(0,i.jsxs)("div",{className:"tooltip before:z-50 before:content-[attr(data-tip)] ","data-tip":(0,t.iS)(s),children:[n?(0,i.jsx)("span",{className:"indicator-item indicator-bottom indicator-center badge px-2 outline outline-white/25 outline-1 rounded-[4px] font-medium shadow-lg",children:n}):(0,i.jsx)(i.Fragment,{}),o?(0,i.jsx)("span",{className:"indicator-item indicator-top font-medium shadow-lg",children:(0,i.jsx)("img",{src:a,className:"w-[24px]"})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("div",{className:"avatar",children:(0,i.jsx)("div",{className:"w-8 rounded-full shadow outline outline-1 outline-white/25",children:(0,i.jsx)("img",{src:l})})})]})}},1589:(e,s,l)=>{l.d(s,{A:()=>t});const t=[{id:"m95j4jxz",number:70},{id:"m8hqi31i",number:69},{id:"m83itkz6",number:68},{id:"m7ju46fy",number:67},{id:"m6y0a205",number:66},{id:"m6h1l4xd",number:65},{id:"m5k2an8p",number:64},{id:"m4q6vtme",number:63},{id:"m4q6ddt7",number:62},{id:"m4adofkk",number:61},{id:"m3rvyepv",number:60},{id:"m34yd7qs",number:59},{id:"m2kwlt60",number:58},{id:"m22b3l2q",number:57},{id:"m18f2i05",number:56},{id:"m0n34q7z",number:55},{id:"m05t53n4",number:54},{id:"lzt9vnfv",number:53},{id:"lywiirac",number:52},{id:"lygltxgu",number:51},{id:"lxo2ds1k",number:50},{id:"lx9ho5f2",number:49},{id:"lwsgoq2e",number:48},{id:"lw3zptqw",number:47},{id:"lvk1it2j",number:46},{id:"luub1xz5",number:45},{id:"lug12fgd",number:44},{id:"lts2aqan",number:43},{id:"ltkys2el",number:42},{id:"lswkbyus",number:41},{id:"ls2jg6ct",number:40},{id:"lrlbwtxn",number:39},{id:"lr3uz1d8",number:38},{id:"lqa43ghl",number:37},{id:"lq63jr4t",number:36},{id:"lphkfmue",number:35},{id:"lorujl6k",number:34},{id:"lo3dbb57",number:33},{id:"lncmwv1g",number:32},{id:"lndqbo35",number:31},{id:"lmpnzhq6",number:30},{id:"lm77zack",number:29},{id:"lleh5fpm",number:28},{id:"ll1f7vl8",number:27},{id:"lkj6emus",number:26},{id:"ljxai1s8",number:25},{id:"ljetrjjf",number:24},{id:"lisaoa37",number:23},{id:"lhzbbljg",number:22},{id:"lhgt6hxj",number:21},{id:"lgzmgxif",number:20},{id:"lgli8qmt",number:19},{id:"lg1ioh3o",number:18},{id:"lfbp5rsx",number:17},{id:"lenh39dp",number:16},{id:"ledh1q44",number:15},{id:"ldkqe7g6",number:14},{id:"ld2c7egr",number:13},{id:"lcjmdijk",number:12},{id:"lbn286o5",number:11},{id:"lbei2nd1",number:10},{id:"lau3vdb5",number:9},{id:"labw9mm1",number:8},{id:"l9qakvod",number:7},{id:"l9dkq0ma",number:6},{id:"l8t9h7wa",number:5},{id:"l884uw8u",number:4},{id:"l7i90j39",number:3},{id:"l76rtr72",number:2},{id:"l6efnna0",number:1}]},4699:(e,s,l)=>{l.d(s,{f:()=>a});var t=l(5043);const a=e=>{const s="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/tiles.json",[l,a]=(0,t.useState)({}),[i,n]=(0,t.useState)(!0);return(0,t.useMemo)((()=>{(async()=>{try{const e=await fetch(s);if(!e.ok)throw new Error("Failed to fetch data");const l=await e.json();a(l),console.log(l)}catch(e){console.log(e)}finally{n(!1)}})()}),[e]),{data:l,loading:i}}},7080:(e,s,l)=>{l.d(s,{j:()=>a});var t=l(5043);const a=e=>{const s="https://storage.googleapis.com/btd6-ct-map/events/"+e+"/event_relics.json",[l,a]=(0,t.useState)([]),[i,n]=(0,t.useState)(!0);return(0,t.useMemo)((()=>{(async()=>{try{const e=await fetch(s);if(!e.ok)throw new Error("Failed to fetch data");const l=await e.json();a(l),console.log(l)}catch(e){console.log(e)}finally{n(!1)}})()}),[e]),{data:l,loading:i}}},3494:(e,s,l)=>{l.r(s),l.d(s,{default:()=>j});var t=l(9967);const a=[{name:"Air and Sea",id:"AirAndSea",image:l(202),description:"Ace, Heli, Buccaneer and Sub have their placement and upgrade costs reduced by 5%, and their reload improved by 5% "},{name:"Box of Monkey",id:"BoxOfMonkey",image:l(8817),description:"Start each game with one free Monkey costing $400 or less for unmodified initial placement."},{name:"Magic Monkeys",id:"MagicMonkeys",image:l(8678),description:"Reduces cost of all Magic Monkeys by 8%."},{name:"Marching Boots",id:"MarchingBoots",image:l(4811),description:"In restricted count games, give players +1 max count of each tower in their loadout or +4 total max count per game."},{name:"Military Monkeys",id:"MilitaryMonkeys",image:l(550),description:"Reduces cost of all Military Monkeys by 8%."},{name:"Monkey Tycoon",id:"MonkeyTycoon",image:l(7178),description:"Get +1 of all Monkey Towers in your loadout and their base price is reduced by 4%."},{name:"Primary Primates",id:"PrimaryPrimates",image:l(8638),description:"Reduces cost of all Primary Monkeys by 8%."},{name:"Support Simians",id:"SupportSimians",image:l(5686),description:"Reduces cost of all Support Monkeys by 8%."},{name:"Starting Stash",id:"StartingStash",image:l(4618),description:"Start each game with an extra 250 cash (stacks with More Cash on Regular Tiles)."}];var i=l(5043),n=l(579);const o=e=>{let{data:s,eventRelics:l,loading:t,relics:o,handleRelicFilterClick:r}=e;const[c,d]=(0,i.useState)([]),m=e=>{r(e.target.id)};return(0,i.useEffect)((()=>{let e=[];Object.entries(s).map((s=>{s[1].RelicType&&e.push(s[1].RelicType)})),d(e.concat(l))}),[s,l]),(0,n.jsxs)("div",{className:"w-2/3",children:[(0,n.jsx)("p",{className:"text-lg font-medium text-center",children:"Select some Relics"}),(0,n.jsx)("div",{className:"w-full",children:t?(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full py-2 items-center",children:[(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"}),(0,n.jsx)("div",{className:"skeleton h-6 w-full"})]}):a.map((e=>(0,n.jsx)("div",{className:"tooltip flex","data-tip":c.includes(e.id)?e.description:"Not available this event.",children:(0,n.jsxs)("label",{className:"label w-full"+(c.includes(e.id)?" cursor-pointer":" cursor-not-allowed opacity-40"),children:[(0,n.jsx)("img",{src:e.image,className:"w-[28px]"}),(0,n.jsx)("span",{className:"label-text",children:e.name}),(0,n.jsx)("input",{type:"checkbox",checked:o.includes(e.id),className:"checkbox checkbox-sm",id:e.id,disabled:!c.includes(e.id),onChange:m})]})},e.id)))})]})};var r=l(9358),c=l(4699);const d={Easy:.85,Medium:1,Hard:1.08};var m=l(9373),u=l(642),h=l(1421);const x=e=>{let{solution:s}=e;return(0,n.jsx)("div",{className:"indicator gap-3 items-center px-12 justify-center border-b border-white/25 py-4",children:s.sort(((e,s)=>s.cost-e.cost)).map(((e,s)=>(0,n.jsx)(h.w,{name:"".concat(e.name,": $").concat(e.cost.toLocaleString()).concat(e.boxOfMonkey?"*":""),image:m.yc[e.name],indicator:e.path,boxOfMonkey:e.boxOfMonkey},s)))})},p=e=>{let{solutions:s,solutionTile:l,solutionNum:t,disableClear:a,clearSolutions:i}=e;return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("p",{className:"text-lg font-bold text-center",children:["Possible Solutions",l?" for ".concat(l," in CT").concat(t):""]}),s.length>0?(0,n.jsxs)("div",{className:"overflow-y-scroll max-h-96 h-96 my-4 py-4 px-12 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Solutions"}),(0,n.jsx)("div",{className:"flex flex-wrap w-full gap-x-2 px-2 items-center justify-center",children:s.map(((e,s)=>(0,n.jsx)(x,{solution:e},s)))})]}):(0,n.jsx)("p",{className:"text-center",children:"Solutions will appear here."}),(0,n.jsxs)("p",{className:"text-center italic",children:["Showing ",s.length," total solution",1===s.length?"":"s","."]}),(0,n.jsx)("div",{className:"flex gap-4 items-center justify-center py-2",children:(0,n.jsx)("button",{className:"btn min-w-24 outline outline-1 outline-error text-error",disabled:a,onClick:i,children:"Clear"})})]})};var f=l(1589),g=l(7080);var b=l(6229);const j=()=>{const[e,s]=(0,i.useState)(f.A[0].number),{data:l,loading:a}=(0,c.f)(e),{data:x,loading:j}=(0,g.j)(e),{data:w,loading:y}=(()=>{const e="https://raw.githubusercontent.com/hemisemidemipresent/cyberquincy/master/jsons/costs.json",[s,l]=(0,i.useState)({}),[t,a]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{(async()=>{try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const t=await s.json();Object.entries(t).forEach((e=>{t[e[0].replace("druid_monkey","Druid").replace("engineer","EngineerMonkey").replace(/(_\w)/g,(e=>e[1].toUpperCase())).replace(/^./,(e=>e.toUpperCase()))]=t[e[0]],delete t[e[0]]})),l(t)}catch(s){console.log(s)}finally{a(!1)}})()}),[e]),{data:s,loading:t}})(),{data:N,loading:v}=(()=>{const e="https://raw.githubusercontent.com/hemisemidemipresent/cyberquincy/master/jsons/heroes.json",[s,l]=(0,i.useState)({}),[t,a]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{(async()=>{try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const t=await s.json();Object.entries(t).forEach((e=>{t[e[0].replace("brickell","AdmiralBrickell").replace("churchill","CaptainChurchill").replace("gwen","Gwendolin").replace("jones","StrikerJones").replace("obyn","ObynGreenfoot").replace("pat","PatFusty").replace(/(_\w)/g,(e=>e[1].toUpperCase())).replace(/^./,(e=>e.toUpperCase()))]=t[e[0]],delete t[e[0]]})),l(t)}catch(s){console.log(s)}finally{a(!1)}})()}),[e]),{data:s,loading:t}})(),[k,M]=(0,i.useState)(""),[S,T]=(0,i.useState)([]),[C,D]=(0,i.useState)(0),[G,R]=(0,i.useState)(2),[H,A]=(0,i.useState)(!1),[_,O]=(0,i.useState)(!0),[q,z]=(0,i.useState)(!1),[E,L]=(0,i.useState)([]),[F,B]=(0,i.useState)(""),[P,I]=(0,i.useState)(0),[Q,U]=(0,i.useState)(!1),[V,Y]=(0,i.useState)([]),[$,K]=(0,i.useState)([]),[W,J]=(0,i.useState)([]),[Z,X]=(0,i.useState)([]),[ee,se]=(0,i.useState)([]),le=a||y||v||j;(0,i.useEffect)((()=>{Q&&setTimeout((()=>{te()}),1)}),[Q]);const te=()=>{const s=[],t=l[k].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)),a=l[k].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max));console.log(t);const i=S.includes("MonkeyTycoon")?1:0,n=S.includes("MarchingBoots")?1:0,o=S.includes("StartingStash")?250:0,r=i+n,c=[{towerType:"all",costMultipiler:d[l[k].GameData.selectedDifficulty]}];S.includes("AirAndSea")&&c.push({towerType:"military",costMultipiler:.95}),S.includes("MilitaryMonkeys")&&c.push({towerType:"military",costMultipiler:.92}),S.includes("MagicMonkeys")&&c.push({towerType:"magic",costMultipiler:.92}),S.includes("MonkeyTycoon")&&c.push({towerType:"all",costMultipiler:.96}),S.includes("PrimaryPrimates")&&c.push({towerType:"primary",costMultipiler:.92}),S.includes("SupportSimians")&&c.push({towerType:"support",costMultipiler:.92}),console.log(c),console.log(N);for(let e=0;e<6;e++)for(let l=0;l<6;l++)for(let t=0;t<6;t++)s.push([e,l,t]);const m=s.filter(((e,s,l)=>l.indexOf(e)===s)).filter((e=>e.filter((e=>e>2)).length<=1)).filter((e=>e.filter((e=>0===e)).length>0)).sort();if(""!==k){B(k),I(e);const s=m.flatMap((e=>Object.entries(w).flatMap((s=>{let[l,a]=s;if(!t.find((e=>l.includes(e.tower))))return{name:l,path:"",cost:-1};const i=u.HK[l],[n,o,r]=e,d=(0,u.QC)(a.cost*c[0].costMultipiler);let m=d+Array.from({length:n+1},((e,s)=>{let l=0;for(let t=0;t<c.length;t++)"all"!==c[t].towerType&&i!==c[t].towerType||(l+=(0,u.QC)(a.upgrades.top_path[s]*c[t].costMultipiler)||0);return l})).reduce(((e,s)=>e+s),0);return m+=Array.from({length:o+1},((e,s)=>{let l=0;for(let t=0;t<c.length;t++)"all"!==c[t].towerType&&i!==c[t].towerType||(l+=(0,u.QC)(a.upgrades.middle_path[s]*c[t].costMultipiler)||0);return l})).reduce(((e,s)=>e+s),0),m+=Array.from({length:r+1},((e,s)=>{let l=0;for(let t=0;t<c.length;t++)"all"!==c[t].towerType&&i!==c[t].towerType||(l+=(0,u.QC)(a.upgrades.bottom_path[s]*c[t].costMultipiler)||0);return l})).reduce(((e,s)=>e+s),0),S.includes("BoxOfMonkey")&&d<=400?[{name:l,path:e.join(""),cost:m},{name:l,path:e.join(""),cost:m-d,boxOfMonkey:!0}]:[{name:l,path:e.join(""),cost:m}]})))).concat(a.map((e=>({name:e.tower,path:"",cost:N[e.tower].cost,isHero:!0})))).filter((e=>e.cost>0&&e.cost<=C)).sort(((e,s)=>s.cost-e.cost));console.log(s);const i=[],n=[];ee.map((e=>{const l=s.find((s=>s.name===e.name&&s.path===e.path));l&&n.push(l)}));const d=n.reduce(((e,s)=>e+s.cost),0);ie({targetPrice:C-d,potentialTowers:s,towerLimit:G-(n.length>G?G:n.length),perTowerLimits:t.map((e=>({name:e.tower,remaining:e.max+r-n.filter((s=>s.name===e.tower)).length,isHero:!1}))).concat(a.map((e=>({name:e.tower,remaining:e.max,isHero:!0})))),block:e=>{e.length>=0&&i.push(n.concat(e))}}),console.log(i),L(_?i.filter((e=>0!==e.filter((e=>{var s,t,a;return(null!==(s=null===(t=w[e.name])||void 0===t?void 0:t.cost)&&void 0!==s?s:null===(a=N[e.name])||void 0===a?void 0:a.cost)<l[k].GameData.dcModel.startRules.cash+o})).length)).sort(((e,s)=>e.length-s.length)):i.sort(((e,s)=>e.length-s.length))),U(!1)}};let ae=0;const ie=e=>{let{targetPrice:s,potentialTowers:l,towerLimit:t,perTowerLimits:a,block:i}=e;if(!i)return;if(0===s){if(H&&0!==t)return;return ae++,void i([])}if(s<0)return;if(0===t)return;if(0===l.length)return;if(ae>=2e3)return;const[n,...o]=l,{name:r,cost:c,boxOfMonkey:d}=n,m=a.findIndex((e=>r.includes(e.name)));0===a[m].remaining||$.includes(r)||Z.includes(r)||ie({targetPrice:s-c,potentialTowers:l.filter((e=>!d||!e.boxOfMonkey)),towerLimit:t-1,perTowerLimits:a.map((e=>e.isHero&&n.isHero?{...e,remaining:0}:e.name===r?{...e,remaining:e.remaining-1}:e)),block:e=>{i([n,...e])}}),ie({targetPrice:s,potentialTowers:o,towerLimit:t,perTowerLimits:a,block:e=>{i([...e])}})};return(0,n.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,n.jsx)("p",{className:"font-bold text-2xl py-2 font-display tracking-tighter text-accent",children:"Least Cash Reverse Calculator"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,n.jsxs)("label",{className:"input input-bordered flex items-center gap-2",children:[(0,n.jsx)("img",{src:t,className:"w-[24px]"}),(0,n.jsx)("input",{className:"font-semibold text-2xl max-w-40",type:"text",inputMode:"numeric",placeholder:"Score",value:C,onChange:e=>{const s=e.target.value;(""===s||/^[0-9\b]*$/.test(s))&&D(Number(s))}})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("p",{className:"text-nowrap",children:"Select a CT event:"}),(0,n.jsx)("select",{id:"ct-select",className:"select select-bordered w-full max-w-xs",onChange:e=>{console.log(e.target.options.selectedIndex)},value:e,children:f.A.map((e=>(0,n.jsxs)("option",{value:e.number,onClick:()=>s(e.number),children:[e.number," (",e.id,")"]},e.number)))})]}),(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsx)("button",{className:"btn w-24"+(k?"":" btn-disabled"),onClick:()=>document.getElementById("hero-modal").showModal(),children:"Heroes"}),(0,n.jsxs)("dialog",{id:"hero-modal",className:"modal",children:[(0,n.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Hero Filters"}),(0,n.jsxs)("p",{className:"py-4",children:["Add any heroes you want the calculation to ",(0,n.jsx)("u",{children:"ALWAYS"})," ","consider."," ",(0,n.jsx)("i",{children:"Note that bought hero levels are not calculated in this."})]}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"flex w-full gap-4",children:[(0,n.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Included Heroes"}),(0,n.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:W.map(((e,s)=>(0,n.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...W];console.log(e),e>=0&&s.splice(e,1),console.log(s),J(s)})(s),children:(0,n.jsx)(h.w,{name:"Delete",image:m.yc[e]},"".concat(e))})))})]}),(0,n.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Excluded Heroes"}),(0,n.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:Z.map(((e,s)=>(0,n.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...Z];console.log(e),e>=0&&s.splice(e,1),console.log(s),X(s)})(s),children:(0,n.jsx)(h.w,{name:"Delete",image:m.yc[e]},"".concat(e))})))})]})]}),(0,n.jsx)("div",{className:"gap-y-2 flex flex-wrap my-4 w-full",children:k?Object.entries(l[k].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max))).map((e=>(0,n.jsx)("div",{className:"basis-1/2 px-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:m.yc[e[1].tower],className:"w-[28px]"}),(0,n.jsx)("span",{className:"label-text grow",children:(0,u.iS)(e[1].tower)}),(0,n.jsx)("button",{className:"btn outline outline-1",onClick:()=>(e=>{const s=[...W];s.includes(e)||(s.push(e),console.log(s),J(s))})(e[1].tower),disabled:Z.includes(e[1].tower),children:"+"}),(0,n.jsx)("button",{className:"btn outline outline-1 outline-error text-error",onClick:()=>(e=>{const s=[...Z];s.includes(e)||(s.push(e),console.log(s),X(s))})(e[1].tower),disabled:W.includes(e[1].tower),children:"x"})]})},e[0]))):null})]}),(0,n.jsx)("div",{className:"modal-action",children:(0,n.jsx)("form",{method:"dialog",children:(0,n.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,n.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,n.jsx)("button",{children:"close"})})]}),(0,n.jsx)("button",{className:"btn w-24"+(k?"":" btn-disabled"),onClick:()=>document.getElementById("tower-modal").showModal(),children:"Towers"}),(0,n.jsxs)("dialog",{id:"tower-modal",className:"modal",children:[(0,n.jsxs)("div",{className:"modal-box max-w-3xl",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-primary",children:"Tower Filters"}),(0,n.jsxs)("p",{className:"py-4",children:["Add any towers and paths you want the calculation to"," ",(0,n.jsx)("u",{children:"ALWAYS"})," consider."]}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"flex w-full gap-4",children:[(0,n.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Included Towers"}),(0,n.jsxs)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:[V.map(((e,s)=>(0,n.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...V];console.log(e),e>=0&&s.splice(e,1),console.log(s),Y(s)})(s),children:(0,n.jsx)(h.w,{name:"Delete",image:m.yc[e]},"".concat(e))}))),ee.map(((e,s)=>(0,n.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...ee];console.log(e),e>=0&&s.splice(e,1),console.log(s),se(s)})(s),children:(0,n.jsx)(h.w,{name:"Delete",image:m.yc[e.name],indicator:e.path},"".concat(e.path," ").concat(e.name))})))]})]}),(0,n.jsxs)("div",{className:"overflow-x-hidden w-full max-h-56 h-56 my-2 py-4 flex flex-col items-center bg-base-200 rounded-xl",children:[(0,n.jsx)("p",{className:"font-semibold",children:"Excluded Towers"}),(0,n.jsx)("div",{className:"indicator items-center w-full px-12 py-4 gap-6 flex-wrap",children:$.map(((e,s)=>(0,n.jsx)("a",{className:"btn hover:outline hover:outline-error hover:cursor-pointer",onClick:()=>(e=>{const s=[...$];console.log(e),e>=0&&s.splice(e,1),console.log(s),K(s)})(s),children:(0,n.jsx)(h.w,{name:"Delete",image:m.yc[e]},"".concat(e))})))})]})]}),(0,n.jsx)("div",{className:"gap-y-2 flex flex-wrap my-4 w-full",children:k?Object.entries(l[k].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max))).map((e=>(0,n.jsx)("div",{className:"basis-1/2 px-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:m.yc[e[1].tower],className:"w-[28px]"}),(0,n.jsx)("span",{className:"label-text grow",children:(0,u.iS)(e[1].tower)}),(0,n.jsx)("label",{className:"input input-bordered flex max-w-16",children:(0,n.jsx)("input",{className:"font-normal w-full",placeholder:"000",maxLength:3,id:"".concat(e[1].tower,"-path")})}),(0,n.jsx)("button",{className:"btn outline outline-1",onClick:()=>(e=>{const s=[...ee],l=document.getElementById("".concat(e,"-path")).value,t=l.split("").map(Number);if(!l){const s=[...V];if(s.includes(e))return;return s.push(e),console.log(s),void Y(s)}const a=[t].filter((e=>e.filter((e=>e>2)).length<=1)).filter((e=>e.filter((e=>0===e)).length>0)).filter((e=>0===e.filter((e=>e>5)).length)).flatMap((e=>e));console.log(a),0!==a.length?(s.push({name:e,path:l,cost:-1}),console.log(s),se(s)):console.log("INVALID PATH")})(e[1].tower),disabled:$.includes(e[1].tower),children:"+"}),(0,n.jsx)("button",{className:"btn outline outline-1 outline-error text-error",onClick:()=>(e=>{const s=[...$];s.includes(e)||(s.push(e),console.log(s),K(s))})(e[1].tower),disabled:V.includes(e[1].tower)||ee.some((s=>s.name===e[1].tower)),children:"x"})]})},e[0]))):null})]}),(0,n.jsx)("div",{className:"modal-action",children:(0,n.jsx)("form",{method:"dialog",children:(0,n.jsx)("button",{className:"btn outline outline-1 outline-error text-error",children:"Close"})})})]}),(0,n.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,n.jsx)("button",{children:"close"})})]}),(0,n.jsxs)("details",{className:"dropdown",children:[(0,n.jsx)("summary",{className:"btn w-24"+(k?"":" btn-disabled"),children:"Filters"}),(0,n.jsxs)("ul",{className:"py-4 shadow-xl menu dropdown-content z-[51] bg-base-100 rounded-box w-64 outline outline-white/25 outline-1",children:[(0,n.jsx)("li",{className:"pointer-events-none",children:(0,n.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Hero"})}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{onClick:()=>{z((e=>!e))},children:[(0,n.jsx)("p",{className:"font-medium text-sm",children:"Only show solutions with heroes."}),(0,n.jsx)("input",{type:"checkbox",checked:q,className:"checkbox checkbox-sm",readOnly:!0})]})}),(0,n.jsx)("li",{className:"pointer-events-none",children:(0,n.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Tower"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center mx-4",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center justify-center mx-4 w-full",children:[(0,n.jsx)("p",{className:"font-medium whitespace-nowrap",children:"Max Towers:"}),(0,n.jsx)("input",{type:"range",min:1,max:10,value:G,onChange:e=>{const s=e.target.value;R(s)},className:"range range-xs"}),(0,n.jsx)("p",{className:"text-lg font-medium",children:G})]}),(0,n.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{onClick:()=>{A((e=>!e))},children:[(0,n.jsxs)("p",{className:"font-medium text-sm",children:["Show solutions with exactly ",G," towers."," ",(0,n.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,n.jsx)("input",{type:"checkbox",checked:H,className:"checkbox checkbox-sm",readOnly:!0})]})}),(0,n.jsx)("li",{className:"pointer-events-none",children:(0,n.jsx)("p",{className:"justify-center font-semibold text-lg text-primary",children:"Miscellaneous"})}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{onClick:()=>{O((e=>!e))},children:[(0,n.jsxs)("p",{className:"font-medium text-sm",children:["Hide initially unaffordable solutions."," ",(0,n.jsx)("i",{className:"text-xs text-accent",children:"Requires recalculation"})]}),(0,n.jsx)("input",{type:"checkbox",checked:_,className:"checkbox checkbox-sm",readOnly:!0})]})})]})]}),(0,n.jsx)("button",{className:"btn min-w-24 outline outline-1"+(Q?" outline-warning text-warning":" outline-success text-success"),disabled:""===k,onClick:()=>{U(!0),(async()=>{U(!0)})()},children:Q?"Loading...":"Calculate"})]})]}),le?(0,n.jsx)(b.R,{}):(0,n.jsxs)("div",{className:"flex gap-2 py-5 w-full",children:[(0,n.jsx)(r.A,{data:l,loading:le,selectedTile:k,gameType:"least_cash",changeTile:e=>{M(e),console.log(e),console.log(l[e]),l[e].GameData.dcModel.towers._items.filter((e=>!e.isHero&&0!==e.max)).find((e=>"MonkeyVillage"===e.tower))&&console.log("uh oh... a village tile! that'll cause issues with calculations"),l[e].GameData.dcModel.towers._items.filter((e=>e.isHero&&0!==e.max)).find((e=>"Geraldo"===e.tower))&&console.log("uh oh... a geraldo tile! that bozo has a bunch of items that cost cash! luckily all of his things cost the same at every level. HOWEVER, i am too lazy to implement that atm"),se([]),Y([]),K([]),J([]),X([])}}),(0,n.jsx)("div",{className:"divider divider-horizontal",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10.605",height:"15.555",className:"fill-neutral-content overflow-visible",children:(0,n.jsx)("path",{d:"m2.828 15.555 7.777-7.779L2.828 0 0 2.828l4.949 4.948L0 12.727l2.828 2.828z"})})}),(0,n.jsx)(o,{data:l,eventRelics:x,loading:le,relics:S,handleRelicFilterClick:e=>{const s=[...S];s.includes(e)?s.splice(s.indexOf(e),1):s.push(e),console.log(s),T(s)}})]}),(0,n.jsx)("div",{className:"divider",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10.605",height:"15.555",className:"fill-neutral-content overflow-visible rotate-90",children:(0,n.jsx)("path",{d:"m2.828 15.555 7.777-7.779L2.828 0 0 2.828l4.949 4.948L0 12.727l2.828 2.828z"})})}),(0,n.jsx)(p,{solutions:E.filter((e=>e.some((e=>(0===V.length||V.includes(e.name))&&(0===ee.length||ee.some((s=>s.name===e.name&&s.path===e.path)))))&&e.every((e=>!$.includes(e.name)&&!Z.includes(e.name)))&&e.some((e=>0===W.length||W.includes(e.name)))&&(!q||e.some((e=>e.isHero))))),solutionTile:F,solutionNum:P,disableClear:""===k,clearSolutions:()=>{B(""),L([])}}),(0,n.jsx)("div",{className:"divider font-display",children:"Notes"}),(0,n.jsxs)("p",{className:"text-center",children:["This calculator is experimental! It's not guaranteed to work and things could be broken.",(0,n.jsx)("br",{}),"Thanks Josh Cheek (Spike Factory) for the base algorithm. Originally written in Ruby, then converted to TypeScript by me.",(0,n.jsx)("br",{}),"It's possible that the site crashes while doing calculations. All I can say right now is be nice with your parameters.",(0,n.jsx)("br",{}),"There is a hard cap of 2000 solutions.",(0,n.jsx)("br",{})]}),(0,n.jsx)("div",{className:"divider font-display",children:"Nerdy Stuff"}),(0,n.jsx)("p",{className:"text-center"}),(0,n.jsx)("p",{className:"font-semibold",children:"The algorithm works as follows:"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"- Build data structure (an array) with all possible upgrade paths (000, 203, 051, etc.)"}),(0,n.jsx)("li",{children:"- Apply prices of available towers to possible upgrade paths, removing ones greater than the target score (user input)"}),(0,n.jsx)("li",{children:"- Apply any relic modifers and tower count restrictions"}),(0,n.jsx)("li",{children:"- Generate a ton of combinations (the computation heavy portion)"}),(0,n.jsx)("li",{children:"- Display solutions; hopefully ones with 1 or more high power towers (tiers 4-5; if applicable)"})]}),(0,n.jsx)("div",{className:"divider font-display"})]})}},9967:(e,s,l)=>{e.exports=l.p+"static/media/least_cash_s.39058b7c9ad6a6632888.webp"}}]);
//# sourceMappingURL=722.5b42a87f.chunk.js.map